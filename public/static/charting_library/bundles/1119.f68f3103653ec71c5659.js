"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[1119],{794086:(e,i,t)=>{t.d(i,{basePriceSources:()=>d,createPriceSourceDefinition:()=>u});var o=t(609838),r=t(761080),n=t(240534),l=t(441288),s=t(333385),a=t(162172);const c=o.t(null,void 0,t(384684)),d=[{title:o.t(null,void 0,t(16610)),value:"open",id:"price-source-open"},{title:o.t(null,void 0,t(778254)),value:"high",id:"price-source-high"},{title:o.t(null,void 0,t(165318)),value:"low",id:"price-source-low"},{title:o.t(null,void 0,t(862578)),value:"close",id:"price-source-close"},{title:o.t(null,void 0,t(469303)),value:"hl2",id:"price-source-hl2"},{title:o.t(null,void 0,t(927311)),value:"hlc3",id:"price-source-hlc3"},{title:o.t(null,void 0,t(604348)),value:"ohlc4",id:"price-source-ohlc4"}];function u(e,i,t,o,d,u){const p=void 0,h=(0,s.createWVFromGetterAndSubscriptions)((()=>!(0,a.isCloseBasedSymbol)(e.mainSeries().symbolInfo())),[e.mainSeries().dataEvents().symbolResolved(),e.mainSeries().dataEvents().symbolError()]);return(0,r.createOptionsPropertyDefinition)({disabled:p&&(0,l.convertFromReadonlyWVToDefinitionProperty)(p.weakReference()),option:(0,l.convertToDefinitionProperty)(e,i.priceSource,u),visible:(0,l.convertFromReadonlyWVToDefinitionProperty)(h.ownership())},{id:`${o}${d}`,title:c,options:new n.WatchedValue(t)})}},380932:(e,i,t)=>{t.d(i,{getSeriesStylePropertiesDefinitions:()=>Oe});var o=t(609838),r=t(272047),n=t(441288),l=(t(112532),t(240534)),s=t(440891),a=t(41899),c=t(365343),d=t(662605),u=t(794086);const p=new r.TranslatedString("change line price source",o.t(null,void 0,t(741837))),h=new r.TranslatedString("change line color",o.t(null,void 0,t(888640))),y=new r.TranslatedString("change line width",o.t(null,void 0,t(948339))),f=o.t(null,void 0,t(903554));function v(e,i,t,o){return[(0,u.createPriceSourceDefinition)(e,i,t,o,"SymbolLinePriceSource",p),(0,n.createLinePropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.color,null,h),width:(0,n.convertToDefinitionProperty)(e,i.linewidth,y)},{id:`${o}SymbolLineStyle`,title:f})]}
const g=new r.TranslatedString("change color bars based on previous close",o.t(null,void 0,t(843090))),S=new r.TranslatedString("change HLC bars",o.t(null,void 0,t(427068))),w=new r.TranslatedString("change bar up color",o.t(null,void 0,t(33464))),b=new r.TranslatedString("change bar down color",o.t(null,void 0,t(459622))),P=new r.TranslatedString("change thin bars",o.t(null,void 0,t(760834))),m=new r.TranslatedString("change area price source",o.t(null,void 0,t(404640))),T=new r.TranslatedString("change area line color",o.t(null,void 0,t(429605))),D=new r.TranslatedString("change area line width",o.t(null,void 0,t(249965))),C=new r.TranslatedString("change area fill color",o.t(null,void 0,t(486866))),_=new r.TranslatedString("change baseline price source",o.t(null,void 0,t(868609))),$=new r.TranslatedString("change baseline top line color",o.t(null,void 0,t(669044))),k=new r.TranslatedString("change baseline top line width",o.t(null,void 0,t(268197))),W=new r.TranslatedString("change baseline bottom line color",o.t(null,void 0,t(171785))),M=new r.TranslatedString("change baseline bottom line width",o.t(null,void 0,t(756175))),V=new r.TranslatedString("change baseline fill top area color",o.t(null,void 0,t(592873))),L=new r.TranslatedString("change baseline fill bottom area color",o.t(null,void 0,t(997216))),I=new r.TranslatedString("change base level",o.t(null,void 0,t(942190))),B=new r.TranslatedString("change high-low body visibility",o.t(null,void 0,t(873021))),O=new r.TranslatedString("change high-low body color",o.t(null,void 0,t(206026))),x=new r.TranslatedString("change high-low borders visibility",o.t(null,void 0,t(615801))),A=new r.TranslatedString("change high-low border color",o.t(null,void 0,t(746844))),E=new r.TranslatedString("change high-low labels visibility",o.t(null,void 0,t(272399))),j=new r.TranslatedString("change high-low labels color",o.t(null,void 0,t(356961))),F=(new r.TranslatedString("change renko wick visibility",o.t(null,void 0,t(79604))),new r.TranslatedString("change renko wick up color",o.t(null,void 0,t(692277))),new r.TranslatedString("change renko wick down color",o.t(null,void 0,t(675487))),new r.TranslatedString("change the display of real prices on price scale (instead of Heiken-Ashi price)",o.t(null,void 0,t(816660))),new r.TranslatedString("change range thin bars",o.t(null,void 0,t(565821))),new r.TranslatedString("change range bars style",o.t(null,void 0,t(516241))),
new r.TranslatedString("change {candleType} body visibility",o.t(null,void 0,t(460608)))),U=new r.TranslatedString("change {candleType} up color",o.t(null,void 0,t(736697))),N=new r.TranslatedString("change {candleType} down color",o.t(null,void 0,t(564571))),R=new r.TranslatedString("change {candleType} border visibility",o.t(null,void 0,t(311114))),H=new r.TranslatedString("change {candleType} up border color",o.t(null,void 0,t(17214))),z=new r.TranslatedString("change {candleType} down border color",o.t(null,void 0,t(20291))),G=new r.TranslatedString("change {candleType} wick visibility",o.t(null,void 0,t(794750))),J=new r.TranslatedString("change {candleType} wick up color",o.t(null,void 0,t(397546))),q=new r.TranslatedString("change {candleType} wick down color",o.t(null,void 0,t(448091))),K=new r.TranslatedString("change {chartType} up color",o.t(null,void 0,t(506970))),Q=new r.TranslatedString("change {chartType} down color",o.t(null,void 0,t(405012))),X=new r.TranslatedString("change {chartType} projection bar up color",o.t(null,void 0,t(385032))),Y=new r.TranslatedString("change {chartType} projection bar down color",o.t(null,void 0,t(172545))),Z=new r.TranslatedString("change {chartType} border bar up color",o.t(null,void 0,t(428394))),ee=new r.TranslatedString("change {chartType} border bar down color",o.t(null,void 0,t(423053))),ie=new r.TranslatedString("change {chartType} projection border bar up color",o.t(null,void 0,t(742826))),te=new r.TranslatedString("change {chartType} projection border bar up color",o.t(null,void 0,t(742826))),oe=new r.TranslatedString("change column up color",o.t(null,void 0,t(688324))),re=new r.TranslatedString("change column down color",o.t(null,void 0,t(893890))),ne=new r.TranslatedString("change column price source",o.t(null,void 0,t(604727))),le=o.t(null,void 0,t(23111)),se=o.t(null,void 0,t(800886)),ae=o.t(null,void 0,t(523091)),ce=o.t(null,void 0,t(823743)),de=o.t(null,void 0,t(620215)),ue=o.t(null,void 0,t(874406)),pe=o.t(null,void 0,t(600333)),he=o.t(null,void 0,t(632163)),ye=o.t(null,void 0,t(903554)),fe=o.t(null,void 0,t(889349)),ve=o.t(null,void 0,t(203159)),ge=o.t(null,void 0,t(741129)),Se=o.t(null,void 0,t(461112)),we=o.t(null,void 0,t(373185)),be=o.t(null,void 0,t(536957)),Pe=o.t(null,void 0,t(817611)),me=(o.t(null,void 0,t(177430)),o.t(null,void 0,t(373466))),Te=o.t(null,void 0,t(388367)),De=(o.t(null,void 0,t(206160)),o.t(null,void 0,t(928975))),Ce=o.t(null,void 0,t(874406)),_e=o.t(null,void 0,t(600333)),$e=o.t(null,void 0,t(5119)),ke=o.t(null,void 0,t(756359)),We=o.t(null,void 0,t(884831)),Me=o.t(null,void 0,t(134579));o.t(null,void 0,t(492516)),o.t(null,void 0,t(527377)),o.t(null,void 0,t(745054));function Ve(e,i,t,o){return(0,n.createCheckablePropertyDefinition)({checked:(0,n.convertToDefinitionProperty)(e,i.barColorsOnPrevClose,g)},{id:`${t}${o}`,title:le})}function Le(e,i,t,o){const r=(0,d.removeSpaces)(t.originalText());return[(0,n.createTwoColorsPropertyDefinition)({checked:(0,n.convertToDefinitionProperty)(e,i.drawBody,F.format({candleType:t})),
color1:(0,n.getColorDefinitionProperty)(e,i.upColor,null,U.format({candleType:t})),color2:(0,n.getColorDefinitionProperty)(e,i.downColor,null,N.format({candleType:t}))},{id:`${o}Symbol${r}CandlesColor`,title:ue}),(0,n.createTwoColorsPropertyDefinition)({checked:(0,n.convertToDefinitionProperty)(e,i.drawBorder,R.format({candleType:t})),color1:(0,n.getColorDefinitionProperty)(e,i.borderUpColor,null,H.format({candleType:t})),color2:(0,n.getColorDefinitionProperty)(e,i.borderDownColor,null,z.format({candleType:t}))},{id:`${o}Symbol${r}BordersColor`,title:pe}),(0,n.createTwoColorsPropertyDefinition)({checked:(0,n.convertToDefinitionProperty)(e,i.drawWick,G.format({candleType:t})),color1:(0,n.getColorDefinitionProperty)(e,i.wickUpColor,null,J.format({candleType:t})),color2:(0,n.getColorDefinitionProperty)(e,i.wickDownColor,null,q.format({candleType:t}))},{id:`${o}Symbol${r}WickColors`,title:he})]}function Ie(e,i,t,o){const r=[];{const l=(0,d.removeSpaces)(t.originalText()),s=(0,n.createColorPropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.upColor,null,K.format({chartType:t}))},{id:`${o}Symbol${l}UpBars`,title:be}),a=(0,n.createColorPropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.downColor,null,Q.format({chartType:t}))},{id:`${o}Symbol${l}DownBars`,title:Pe}),c=(0,n.createColorPropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.upColorProjection,null,X.format({chartType:t}))},{id:`${o}Symbol${l}ProjectionUpBars`,title:me}),u=(0,n.createColorPropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.downColorProjection,null,Y.format({chartType:t}))},{id:`${o}Symbol${l}ProjectionDownBars`,title:Te});r.push(s,a,c,u)}return r}function Be(e,i,t,o){const r=[];{const l=(0,d.removeSpaces)(t.originalText()),s=(0,n.createTwoColorsPropertyDefinition)({color1:(0,n.getColorDefinitionProperty)(e,i.upColor,null,K.format({chartType:t})),color2:(0,n.getColorDefinitionProperty)(e,i.borderUpColor,null,Z.format({chartType:t}))},{id:`${o}Symbol${l}UpBars`,title:be}),a=(0,n.createTwoColorsPropertyDefinition)({color1:(0,n.getColorDefinitionProperty)(e,i.downColor,null,Q.format({chartType:t})),color2:(0,n.getColorDefinitionProperty)(e,i.borderDownColor,null,ee.format({chartType:t}))},{id:`${o}Symbol${l}DownBars`,title:Pe}),c=(0,n.createTwoColorsPropertyDefinition)({color1:(0,n.getColorDefinitionProperty)(e,i.upColorProjection,null,X.format({chartType:t})),color2:(0,n.getColorDefinitionProperty)(e,i.borderUpColorProjection,null,ie.format({chartType:t}))},{id:`${o}Symbol${l}ProjectionUpBars`,title:me}),u=(0,n.createTwoColorsPropertyDefinition)({color1:(0,n.getColorDefinitionProperty)(e,i.downColorProjection,null,Y.format({chartType:t})),color2:(0,n.getColorDefinitionProperty)(e,i.borderDownColorProjection,null,te.format({chartType:t}))},{id:`${o}Symbol${l}ProjectionDownBars`,title:Te});r.push(s,a,c,u)}return r}function Oe(e,i,d,p,h){switch(d){case 0:return function(e,i,t){return[Ve(e,i,t,"SymbolBarStyleBarColorsOnPrevClose"),(0,n.createCheckablePropertyDefinition)({checked:(0,
n.convertToDefinitionProperty)(e,i.dontDrawOpen,S)},{id:`${t}SymbolDontDrawOpen`,title:se}),(0,n.createColorPropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.upColor,null,w)},{id:`${t}SymbolUpColor`,title:ae}),(0,n.createColorPropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.downColor,null,b)},{id:`${t}SymbolDownColor`,title:ce}),(0,n.createCheckablePropertyDefinition)({checked:(0,n.convertToDefinitionProperty)(e,i.thinBars,P)},{id:`${t}SymbolBarThinBars`,title:de})].filter(a.isExistent)}(e,i.barStyle.childs(),h);case 1:case 19:return function(e,i,n){return[Ve(e,i,n,"SymbolCandleStyleBarColorsOnPrevClose"),...Le(e,i,new r.TranslatedString("candle",o.t(null,void 0,t(821105))),n)].filter(a.isExistent)}(e,1===d?i.candleStyle.childs():i.volCandlesStyle.childs(),h);case 2:return v(e,i.lineStyle.childs(),p.seriesPriceSources,h);case 14:return v(e,i.lineWithMarkersStyle.childs(),p.seriesPriceSources,h);case 15:return v(e,i.steplineStyle.childs(),p.seriesPriceSources,h);case 3:return function(e,i,t,o){return[(0,u.createPriceSourceDefinition)(e,i,t,o,"SymbolAreaPriceSource",m),(0,n.createLinePropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.linecolor,null,T),width:(0,n.convertToDefinitionProperty)(e,i.linewidth,D)},{id:`${o}SymbolAreaLineStyle`,title:ye}),(0,n.createTwoColorsPropertyDefinition)({color1:(0,n.getColorDefinitionProperty)(e,i.color1,i.transparency,C),color2:(0,n.getColorDefinitionProperty)(e,i.color2,i.transparency,C)},{id:`${o}SymbolAreaFills`,title:ge})]}(e,i.areaStyle.childs(),p.seriesPriceSources,h);case 16:return function(e,i,t,o){return[(0,n.createLinePropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.highLineColor,null,T),width:(0,n.convertToDefinitionProperty)(e,i.highLineWidth,D)},{id:`${o}SymbolHLCAreaHighLineStyle`,title:ke}),(0,n.createLinePropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.lowLineColor,null,T),width:(0,n.convertToDefinitionProperty)(e,i.lowLineWidth,D)},{id:`${o}SymbolHLCAreaLowLineStyle`,title:Me}),(0,n.createLinePropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.closeLineColor,null,T),width:(0,n.convertToDefinitionProperty)(e,i.closeLineWidth,D)},{id:`${o}SymbolHLCAreaCloseLineStyle`,title:We}),(0,n.createTwoColorsPropertyDefinition)({color1:(0,n.getColorDefinitionProperty)(e,i.highCloseFillColor,null,C),color2:(0,n.getColorDefinitionProperty)(e,i.closeLowFillColor,null,C)},{id:`${o}SymbolHLCAreaFills`,title:ge})]}(e,i.hlcAreaStyle.childs(),p.seriesPriceSources,h);case 9:return Le(e,i.hollowCandleStyle.childs(),new r.TranslatedString("hollow candles",o.t(null,void 0,t(292598))),h);case 10:return function(e,i,t,o){return[(0,u.createPriceSourceDefinition)(e,i,t,o,"SymbolBaseLinePriceSource",_),(0,n.createLinePropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.topLineColor,null,$),width:(0,n.convertToDefinitionProperty)(e,i.topLineWidth,k)},{id:`${o}SymbolBaseLineTopLine`,title:fe}),(0,n.createLinePropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.bottomLineColor,null,W),width:(0,
n.convertToDefinitionProperty)(e,i.bottomLineWidth,M)},{id:`${o}SymbolBaseLineBottomLine`,title:ve}),(0,n.createTwoColorsPropertyDefinition)({color1:(0,n.getColorDefinitionProperty)(e,i.topFillColor1,null,V),color2:(0,n.getColorDefinitionProperty)(e,i.topFillColor2,null,V)},{id:`${o}SymbolBaseLineTopFills`,title:Se}),(0,n.createTwoColorsPropertyDefinition)({color1:(0,n.getColorDefinitionProperty)(e,i.bottomFillColor1,null,L),color2:(0,n.getColorDefinitionProperty)(e,i.bottomFillColor2,null,L)},{id:`${o}SymbolBaseLineBottomFills`,title:we}),(0,n.createNumberPropertyDefinition)({value:(0,n.convertToDefinitionProperty)(e,i.baseLevelPercentage,I,[c.floor])},{id:`${o}SymbolBaseLevelPercentage`,title:De,type:0,min:new l.WatchedValue(0),max:new l.WatchedValue(100),step:new l.WatchedValue(1),unit:new l.WatchedValue("%")})]}(e,i.baselineStyle.childs(),p.seriesPriceSources,h);case 13:return function(e,i,t,o){return[(0,u.createPriceSourceDefinition)(e,i,t,o,"SymbolColumnPriceSource",ne),Ve(e,i,o,"SymbolColumnStyleColumnColorsOnPrevClose"),(0,n.createColorPropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.upColor,null,oe)},{id:`${o}SymbolUpColor`,title:ae}),(0,n.createColorPropertyDefinition)({color:(0,n.getColorDefinitionProperty)(e,i.downColor,null,re)},{id:`${o}SymbolDownColor`,title:ce})].filter(a.isExistent)}(e,i.columnStyle.childs(),p.seriesPriceSources,h)}if(12===d&&s.enabled("chart_style_hilo")){return function(e,i,t){return[(0,n.createColorPropertyDefinition)({checked:(0,n.convertToDefinitionProperty)(e,i.drawBody,B),color:(0,n.getColorDefinitionProperty)(e,i.color,null,O)},{id:`${t}SymbolBodiesColor`,title:Ce}),(0,n.createColorPropertyDefinition)({checked:(0,n.convertToDefinitionProperty)(e,i.showBorders,x),color:(0,n.getColorDefinitionProperty)(e,i.borderColor,null,A)},{id:`${t}SymbolBorderColor`,title:_e}),(0,n.createTextPropertyDefinition)({checked:(0,n.convertToDefinitionProperty)(e,i.showLabels,E),color:(0,n.getColorDefinitionProperty)(e,i.labelColor,null,j)},{id:`${t}SymbolLabels`,title:$e,isEditable:!1,isMultiLine:!1})]}(e,i.hiloStyle.childs(),h)}if(!i.hasOwnProperty("haStyle"))return[];if(p.isJapaneseChartsAvailable&&8===d){return function(e,i,n){const l=[];return l.push(Ve(e,i,n,"SymbolHAStyleBarColorsOnPrevClose"),...Le(e,i,new r.TranslatedString("Heikin Ashi",o.t(null,void 0,t(863876))),n)),l}(e,i.haStyle.childs(),h)}if(p.isJapaneseChartsAvailable&&s.enabled("japanese_chart_styles")){if(4===d||5===d||6===d||7===d||8===d)switch(d){case 4:return function(e,i,n){return[...Be(e,i,new r.TranslatedString("renko",o.t(null,void 0,t(170282))),n)]}(e,i.renkoStyle.childs(),h);case 5:return Ie(e,i.kagiStyle.childs(),new r.TranslatedString("kagi",o.t(null,void 0,t(310073))),h);case 6:return Ie(e,i.pnfStyle.childs(),new r.TranslatedString("point & figure",o.t(null,void 0,t(31562))),h);case 7:return Be(e,i.pbStyle.childs(),new r.TranslatedString("line break",o.t(null,void 0,t(529152))),h)}0}return[]}},71119:(e,i,t)=>{t.d(i,{SeriesPropertyDefinitionsViewModel:()=>j,seriesPrecisionValues:()=>E})
;var o=t(650151),r=t(609838),n=t(272047),l=t(440891),s=t(441288),a=t(983023),c=t(240534),d=t(676725),u=t(162172),p=t(380932),h=t(365343);const y=new n.TranslatedString("change {inputName} property",r.t(null,void 0,t(466110)));function f(e){return e.map((e=>({value:e,title:r.t(e,{context:"input"},t(932856))})))}const v=new Set(["percentageLTP"]);function g(e,i,l,a,d,p,g){const S=[];return l.forEach((l=>{if(!function(e,i){return!e.isHidden&&(void 0===e.visible||function(e,i){if(!e)return!0;const t=e.split("==");return!(t.length<2)&&i[t[0]].value()===t[1]}(e.visible,i))}(l,a))return;const w=l.id;if(!a.hasOwnProperty(w))return;const b=a[w],P=function(e,i){return"style"===e.id?"Box size assignment method":"boxSize"===e.id?"Box size":i.childs().name.value()}(l,d[w]),m=function(e){return r.t(e,{context:"input"},t(932856))}(P),T=new n.TranslatedString(P,m);if("options"in l){const i=(0,o.ensure)(l.options);S.push((0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(e,b,y.format({inputName:T}))},{id:`${g}${l.name}`,title:m,options:new c.WatchedValue(f(i))}))}else if("integer"!==l.type){if("float"===l.type){let t;return t=function(e,i){return!((i===(0,u.chartStyleStudyId)(4)||i===(0,u.chartStyleStudyId)(6))&&"boxSize"===e||i===(0,u.chartStyleStudyId)(5)&&"reversalAmount"===e)}(w,i)||null===p.value()?new c.WatchedValue(l.min):p,void S.push((0,s.createNumberPropertyDefinition)({value:(0,s.convertToDefinitionProperty)(e,b,y.format({inputName:T}))},{id:`${g}${l.name}`,title:m,type:1,min:t,max:new c.WatchedValue(l.max),unit:v.has(l.id)?new c.WatchedValue("%"):void 0,defval:l.defval}))}"text"!==l.type?"bool"!==l.type||S.push((0,s.createCheckablePropertyDefinition)({checked:(0,s.convertToDefinitionProperty)(e,b,y.format({inputName:T}))},{id:`${g}${l.name}`,title:m})):S.push((0,s.createTextPropertyDefinition)({text:(0,s.convertToDefinitionProperty)(e,b,y.format({inputName:T}))},{id:`${g}${l.name}`,title:m,isEditable:!0,isMultiLine:!1}))}else S.push((0,s.createNumberPropertyDefinition)({value:(0,s.convertToDefinitionProperty)(e,b,y.format({inputName:T}),[h.floor])},{id:`${g}${l.name}`,title:m,type:0,min:new c.WatchedValue(l.min),max:new c.WatchedValue(l.max),unit:v.has(l.id)?new c.WatchedValue("%"):void 0,defval:l.defval}))})),S}var S=t(937778),w=t(248361),b=t(976418),P=t(658895),m=t(140920),T=t(794086);const D=(0,S.getLogger)("Chart.Definitions.Series"),C=l.enabled("pre_post_market_sessions"),_=new n.TranslatedString("change decimal places",r.t(null,void 0,t(482063))),$=new n.TranslatedString("change timezone",r.t(null,void 0,t(920137))),k=(new n.TranslatedString("adjust data for dividends",r.t(null,void 0,t(818077))),new n.TranslatedString("use settlement as close on daily interval",r.t(null,void 0,t(992978))),new n.TranslatedString("adjust for contract changes",r.t(null,void 0,t(601433))),
new n.TranslatedString("change session",r.t(null,void 0,t(887041)))),W=new n.TranslatedString("change extended hours color",r.t(null,void 0,t(844223))),M=new n.TranslatedString("change pre market color",r.t(null,void 0,t(344371))),V=new n.TranslatedString("change post market color",r.t(null,void 0,t(538730))),L=(r.t(null,void 0,t(493020)),r.t(null,void 0,t(194031))),I=(r.t(null,void 0,t(768921)),r.t(null,void 0,t(549545)),r.t(null,void 0,t(188327))),B=r.t(null,void 0,t(159766)),O=r.t(null,void 0,t(877073)),x=r.t(null,void 0,t(916564)),A=[{priceScale:2,minMove:1,frac:!0},{priceScale:4,minMove:1,frac:!0},{priceScale:8,minMove:1,frac:!0},{priceScale:16,minMove:1,frac:!0},{priceScale:32,minMove:1,frac:!0},{priceScale:64,minMove:1,frac:!0},{priceScale:128,minMove:1,frac:!0},{priceScale:320,minMove:1,frac:!0}];function E(){const e=[{title:x,value:"default"}],i=function(e=15){const i=[];for(let t=0;t<=e;t++)i.push({priceScale:Math.pow(10,t),minMove:1,frac:!1});return i}();for(let o=0;o<i.length;o++){const n=Math.log10(i[o].priceScale),l=0===n?r.t(null,void 0,t(447326)):r.t(null,{plural:"{value} decimals",count:n,replace:{value:n.toString()}},t(959644));e.push({title:l,value:`${i[o].priceScale},${i[o].minMove},${i[o].frac}`})}for(let i=0;i<A.length;i++)e.push({title:`${A[i].minMove}/${A[i].priceScale}`,value:`${A[i].priceScale},${A[i].minMove},${A[i].frac}`});return e}class j{constructor(e,i,t,o,r,n){this._definitions=null,this._inputsSubscriptions=null,this._isDestroyed=!1,this._propertyPages=null,this._seriesMinTickWV=null,this._sessionIdOptionsWV=new c.WatchedValue([]),this._series=e,this._undoModel=i,this._model=this._undoModel.model(),this._propertyPageId=t,this._propertyPageName=o,this._propertyPageIcon=r,this._timezonePropertyObj=n,this._series.onStyleChanged().subscribe(this,this._updateDefinitions),this._series.properties().childs().rangeStyle.childs().barStyle.listeners().subscribe(this,this._updateDefinitions),this._series.dataEvents().symbolResolved().subscribe(this,this._updateSeriesMinTickWV),this._series.dataEvents().symbolResolved().subscribe(this,this._updateSessionIdOptionsWV),this._updateSeriesMinTickWV(),this._updateSessionIdOptionsWV()}destroy(){null!==this._propertyPages&&this._propertyPages.forEach((e=>{(0,s.destroyDefinitions)(e.definitions.value())})),this._series.onStyleChanged().unsubscribe(this,this._updateDefinitions),this._series.properties().childs().rangeStyle.childs().barStyle.listeners().unsubscribeAll(this),this._series.dataEvents().symbolResolved().unsubscribeAll(this),this._unsubscribeInputsUpdate(),this._isDestroyed=!0}propertyPages(){return null===this._propertyPages?this._getDefinitions().then((e=>{var i;if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");return null===this._propertyPages&&(this._propertyPages=[{id:this._propertyPageId,title:this._propertyPageName,icon:this._propertyPageIcon,definitions:new c.WatchedValue(e.definitions),visible:null!==(i=e.visible)&&void 0!==i?i:new c.WatchedValue(!0).readonly()}]),this._propertyPages
})):Promise.resolve(this._propertyPages)}_seriesMinTick(){const e=this._series.symbolInfo();return null!==e?e.minmov/e.pricescale:null}_updateSeriesMinTickWV(){null===this._seriesMinTickWV?this._seriesMinTickWV=new c.WatchedValue(this._seriesMinTick()):this._seriesMinTickWV.setValue(this._seriesMinTick())}_updateSessionIdOptionsWV(){if(!C)return;const e=this._series.symbolInfo();if(null===e)return;const i=(e.subsessions||[]).filter((e=>!e.private)).map((e=>({title:(0,m.translateSessionDescription)(e.description),value:e.id})));this._sessionIdOptionsWV.setValue(i)}_updateDefinitions(){null!==this._definitions&&(0,s.destroyDefinitions)(this._definitions.definitions),this._definitions=null,this._createSeriesDefinitions().then((e=>{if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");(0,o.ensureNotNull)(this._propertyPages)[0].definitions.setValue(e.definitions)}))}_getDefinitions(){return null===this._definitions?this._createSeriesDefinitions():Promise.resolve(this._definitions)}_unsubscribeInputsUpdate(){null!==this._inputsSubscriptions&&(this._inputsSubscriptions.forEach((e=>{e.unsubscribeAll(this)})),this._inputsSubscriptions=null)}_subscribeInputsUpdate(e,i){this._unsubscribeInputsUpdate();const t=[];e.forEach((e=>{if(void 0!==e.visible){const o=e.visible.split("==");if(2===o.length){const e=i[o[0]];-1===t.indexOf(e)&&(e.subscribe(this,this._updateDefinitions),t.push(e))}}})),t.length>0?this._inputsSubscriptions=t:this._inputsSubscriptions=null}async _createSeriesDefinitions(){const e=this._series.properties().childs(),i=this._series.getInputsProperties(),n=this._series.getInputsInfoProperties(),l=e.style.value(),h=this._series.getStyleShortName(),y=a.chartStylesWithAttachedStudies.includes(l)?null:(0,u.chartStyleStudyId)(l);let f,v=null;if(null!==y){let e;try{e=await(0,d.studyMetaInfoRepository)().findById({type:"java",studyId:y});const t=(0,o.ensureNotNull)(this._seriesMinTickWV);v=g(this._undoModel,e.id,e.inputs,i,n,t,h),this._subscribeInputsUpdate(e.inputs,i)}catch(i){D.logWarn(`Find meta info for create series definitions with error - ${(0,w.errorToString)(i)}`),e=null}if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed")}else this._unsubscribeInputsUpdate();if(this._isDestroyed)throw new Error("SeriesPropertyDefinitionsViewModel already destroyed");if(a.chartStylesWithAttachedStudies.includes(l))throw new Error("unexpected chart style");{const i=(0,p.getSeriesStylePropertiesDefinitions)(this._undoModel,e,l,{seriesPriceSources:T.basePriceSources,isJapaneseChartsAvailable:true},"mainSeries");null!==v&&i.push(...v),f=(0,s.createPropertyDefinitionsGeneralGroup)(i,"generalSymbolStylesGroup",(0,u.getTranslatedChartStyleName)(l))}const S=(0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._undoModel,e.minTick,_),visible:(0,s.convertFromReadonlyWVToDefinitionProperty)(new c.WatchedValue(!0).ownership())},{id:`${h}SymbolMinTick`,title:B,options:new c.WatchedValue(E())}),b=(0,
s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._undoModel,this._timezonePropertyObj.property,$)},{id:`${h}SymbolTimezone`,title:O,options:new c.WatchedValue(this._timezonePropertyObj.values)});return this._definitions={definitions:[f,(0,s.createPropertyDefinitionsGeneralGroup)([...await this._seriesDataDefinitions(h),S,b],"dataModififcationGroup",r.t(null,void 0,t(848225)))]},this._definitions}async _seriesDataDefinitions(e){const i=[];if(C){const t=this._series.sessionIdProxyProperty(),o=(0,P.combineWithFilteredUpdate)(((e,i)=>!i&&(0,u.symbolHasSeveralSessions)(this._series.symbolInfo())),((e,i)=>i||!e),this._series.symbolResolvingActive().weakReference(),(0,b.createWVFromProperty)(this._series.isDWMProperty()).ownership()),r=(0,s.createOptionsPropertyDefinition)({option:(0,s.convertToDefinitionProperty)(this._undoModel,t,k),visible:(0,s.convertFromReadonlyWVToDefinitionProperty)(o.ownership())},{id:"sessionId",title:L,options:this._sessionIdOptionsWV});i.push(r);const n=(await this._model.sessions().promise()).graphicsInfo();let l=!1;n.backgrounds&&(l=void 0!==n.backgrounds.outOfSession);const a=await(l?this._createOutOfSessionDefinition(e):this._createPrePostMarketDefinition(e));i.push(a)}return i}async _createOutOfSessionDefinition(e){const i=(await this._model.sessions().promise()).properties().childs().graphics.childs().backgrounds.childs().outOfSession.childs();return(0,s.createColorPropertyDefinition)({color:(0,s.getColorDefinitionProperty)(this._undoModel,i.color,i.transparency,W)},{id:`${e}SymbolExtendedHoursColors`,title:I})}async _createPrePostMarketDefinition(e){const i=(0,P.combineWithFilteredUpdate)(((e,i)=>!i&&(0,u.symbolHasPreOrPostMarket)(this._series.symbolInfo())&&!(0,u.isRegularSessionId)(this._series.sessionIdProxyProperty().value())),((e,i)=>i||!e),this._series.symbolResolvingActive().weakReference(),(0,b.createWVFromProperty)(this._series.isDWMProperty()).ownership()),t=await this._model.sessions().promise(),o=t.properties().childs().graphics.childs().backgrounds.childs().preMarket.childs(),r=t.properties().childs().graphics.childs().backgrounds.childs().postMarket.childs();return(0,s.createTwoColorsPropertyDefinition)({color1:(0,s.getColorDefinitionProperty)(this._undoModel,o.color,o.transparency,M),color2:(0,s.getColorDefinitionProperty)(this._undoModel,r.color,r.transparency,V),visible:(0,s.convertFromReadonlyWVToDefinitionProperty)(i.ownership())},{id:`${e}SymbolExtendedHoursColors`,title:I})}}}}]);