(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[2788],{574581:e=>{e.exports={container:"container-WDZ0PRNh","container-xxsmall":"container-xxsmall-WDZ0PRNh","container-xsmall":"container-xsmall-WDZ0PRNh","container-small":"container-small-WDZ0PRNh","container-medium":"container-medium-WDZ0PRNh","container-large":"container-large-WDZ0PRNh","intent-default":"intent-default-WDZ0PRNh",focused:"focused-WDZ0PRNh",readonly:"readonly-WDZ0PRNh",disabled:"disabled-WDZ0PRNh","with-highlight":"with-highlight-WDZ0PRNh",grouped:"grouped-WDZ0PRNh","adjust-position":"adjust-position-WDZ0PRNh","first-row":"first-row-WDZ0PRNh","first-col":"first-col-WDZ0PRNh",stretch:"stretch-WDZ0PRNh","font-size-medium":"font-size-medium-WDZ0PRNh","font-size-large":"font-size-large-WDZ0PRNh","no-corner-top-left":"no-corner-top-left-WDZ0PRNh","no-corner-top-right":"no-corner-top-right-WDZ0PRNh","no-corner-bottom-right":"no-corner-bottom-right-WDZ0PRNh","no-corner-bottom-left":"no-corner-bottom-left-WDZ0PRNh","size-xxsmall":"size-xxsmall-WDZ0PRNh","size-xsmall":"size-xsmall-WDZ0PRNh","size-small":"size-small-WDZ0PRNh","size-medium":"size-medium-WDZ0PRNh","size-large":"size-large-WDZ0PRNh","intent-success":"intent-success-WDZ0PRNh","intent-warning":"intent-warning-WDZ0PRNh","intent-danger":"intent-danger-WDZ0PRNh","intent-primary":"intent-primary-WDZ0PRNh","border-none":"border-none-WDZ0PRNh","border-thin":"border-thin-WDZ0PRNh","border-thick":"border-thick-WDZ0PRNh",highlight:"highlight-WDZ0PRNh",shown:"shown-WDZ0PRNh"}},581329:e=>{e.exports={"inner-slot":"inner-slot-W53jtLjw",interactive:"interactive-W53jtLjw",icon:"icon-W53jtLjw","inner-middle-slot":"inner-middle-slot-W53jtLjw","before-slot":"before-slot-W53jtLjw","after-slot":"after-slot-W53jtLjw"}},455315:e=>{e.exports={input:"input-RUSovanF","size-xxsmall":"size-xxsmall-RUSovanF","size-xsmall":"size-xsmall-RUSovanF","size-small":"size-small-RUSovanF","size-medium":"size-medium-RUSovanF","size-large":"size-large-RUSovanF","with-start-slot":"with-start-slot-RUSovanF","with-end-slot":"with-end-slot-RUSovanF"}},691504:e=>{e.exports={scrollWrap:"scrollWrap-FaOvTD2r"}},660591:e=>{e.exports={wrap:"wrap-vSb6C0Bj","wrap--horizontal":"wrap--horizontal-vSb6C0Bj",bar:"bar-vSb6C0Bj",barInner:"barInner-vSb6C0Bj","barInner--horizontal":"barInner--horizontal-vSb6C0Bj","bar--horizontal":"bar--horizontal-vSb6C0Bj"}},59385:e=>{e.exports={dropTargetInside:"dropTargetInside-e_nPSSdZ",dropTarget:"dropTarget-e_nPSSdZ",before:"before-e_nPSSdZ",after:"after-e_nPSSdZ"}},612356:e=>{e.exports={sticky:"sticky-U0YaDVkl",hideSticky:"hideSticky-U0YaDVkl"}},745721:e=>{e.exports={wrap:"wrap-IEe5qpW4",selected:"selected-IEe5qpW4",childOfSelected:"childOfSelected-IEe5qpW4",disabled:"disabled-IEe5qpW4",expandHandle:"expandHandle-IEe5qpW4",expanded:"expanded-IEe5qpW4"}},389791:e=>{e.exports={separator:"separator-MgF6KBas",sticky:"sticky-MgF6KBas",tree:"tree-MgF6KBas",overlayScrollWrap:"overlayScrollWrap-MgF6KBas",listContainer:"listContainer-MgF6KBas"}},520723:e=>{e.exports={button:"button-w6lVe_oI",
hovered:"hovered-w6lVe_oI",disabled:"disabled-w6lVe_oI"}},331774:(e,t,n)=>{"use strict";function r(e){let t=0;return e.isTop&&e.isLeft||(t+=1),e.isTop&&e.isRight||(t+=2),e.isBottom&&e.isLeft||(t+=8),e.isBottom&&e.isRight||(t+=4),t}n.d(t,{getGroupCellRemoveRoundBorders:()=>r})},34735:(e,t,n)=>{"use strict";n.d(t,{ControlSkeleton:()=>m,InputClasses:()=>h});var r=n(50959),o=n(497754),s=n(650151),i=n(525388),l=n(800417),c=n(380327),d=n(331774);var a=n(574581),u=n.n(a);function f(e){let t="";return 0!==e&&(1&e&&(t=o(t,u()["no-corner-top-left"])),2&e&&(t=o(t,u()["no-corner-top-right"])),4&e&&(t=o(t,u()["no-corner-bottom-right"])),8&e&&(t=o(t,u()["no-corner-bottom-left"]))),t}function p(e,t,n,r){const{removeRoundBorder:s,className:i,intent:l="default",borderStyle:c="thin",size:a,highlight:p,disabled:S,readonly:h,stretch:E,noReadonlyStyles:g,isFocused:m}=e,v=f(null!=s?s:(0,d.getGroupCellRemoveRoundBorders)(n));return o(u().container,u()[`container-${a}`],u()[`intent-${l}`],u()[`border-${c}`],a&&u()[`size-${a}`],v,p&&u()["with-highlight"],S&&u().disabled,h&&!g&&u().readonly,m&&u().focused,E&&u().stretch,t&&u().grouped,!r&&u()["adjust-position"],n.isTop&&u()["first-row"],n.isLeft&&u()["first-col"],i)}function S(e,t,n){const{highlight:r,highlightRemoveRoundBorder:s}=e;if(!r)return u().highlight;const i=f(null!=s?s:(0,d.getGroupCellRemoveRoundBorders)(t));return o(u().highlight,u().shown,u()[`size-${n}`],i)}const h={FontSizeMedium:(0,s.ensureDefined)(u()["font-size-medium"]),FontSizeLarge:(0,s.ensureDefined)(u()["font-size-large"])},E={passive:!1};function g(e,t){const{style:n,id:o,role:s,onFocus:d,onBlur:a,onMouseOver:u,onMouseOut:f,onMouseDown:h,onMouseUp:g,onKeyDown:m,onClick:v,tabIndex:T,startSlot:D,middleSlot:N,endSlot:y,onWheel:I,onWheelNoPassive:C=null,size:R}=e,{isGrouped:_,cellState:b,disablePositionAdjustment:P=!1}=(0,r.useContext)(c.ControlGroupContext),x=function(e,t=null,n){const o=(0,r.useRef)(null),s=(0,r.useRef)(null),i=(0,r.useCallback)((()=>{if(null===o.current||null===s.current)return;const[e,t,n]=s.current;null!==t&&o.current.addEventListener(e,t,n)}),[]),l=(0,r.useCallback)((()=>{if(null===o.current||null===s.current)return;const[e,t,n]=s.current;null!==t&&o.current.removeEventListener(e,t,n)}),[]),c=(0,r.useCallback)((e=>{l(),o.current=e,i()}),[]);return(0,r.useEffect)((()=>(s.current=[e,t,n],i(),l)),[e,t,n]),c}("wheel",C,E);return r.createElement("span",{style:n,id:o,role:s,className:p(e,_,b,P),tabIndex:T,ref:(0,i.useMergedRefs)([t,x]),onFocus:d,onBlur:a,onMouseOver:u,onMouseOut:f,onMouseDown:h,onMouseUp:g,onKeyDown:m,onClick:v,onWheel:I,...(0,l.filterDataProps)(e),...(0,l.filterAriaProps)(e)},D,N,y,r.createElement("span",{className:S(e,b,R)}))}g.displayName="ControlSkeleton";const m=r.forwardRef(g)},102691:(e,t,n)=>{"use strict";n.d(t,{AfterSlot:()=>u,BeforeSlot:()=>l,EndSlot:()=>a,MiddleSlot:()=>d,StartSlot:()=>c});var r=n(50959),o=n(497754),s=n(581329),i=n.n(s);function l(e){const{className:t,children:n}=e;return r.createElement("span",{className:o(i()["before-slot"],t)},n)}function c(e){
const{className:t,interactive:n=!0,icon:s=!1,children:l}=e;return r.createElement("span",{className:o(i()["inner-slot"],n&&i().interactive,s&&i().icon,t)},l)}function d(e){const{className:t,children:n}=e;return r.createElement("span",{className:o(i()["inner-slot"],i()["inner-middle-slot"],t)},n)}function a(e){const{className:t,interactive:n=!0,icon:s=!1,children:l}=e;return r.createElement("span",{className:o(i()["inner-slot"],n&&i().interactive,s&&i().icon,t)},l)}function u(e){const{className:t,children:n}=e;return r.createElement("span",{className:o(i()["after-slot"],t)},n)}},654936:(e,t,n)=>{"use strict";n.d(t,{InputControl:()=>m});var r=n(50959),o=n(497754),s=n(800417),i=n(269842),l=n(1811),c=n(525388),d=n(21778),a=n(383836),u=n(603548),f=n(34735),p=n(102691),S=n(455315),h=n.n(S);function E(e){return!(0,s.isAriaAttribute)(e)&&!(0,s.isDataAttribute)(e)}function g(e){const{id:t,title:n,role:i,tabIndex:l,placeholder:c,name:d,type:a,value:u,defaultValue:S,draggable:g,autoComplete:m,autoFocus:v,maxLength:T,min:D,max:N,step:y,pattern:I,inputMode:C,onSelect:R,onFocus:_,onBlur:b,onKeyDown:P,onKeyUp:x,onKeyPress:L,onChange:M,onDragStart:O,size:w="small",className:k,inputClassName:F,disabled:z,readonly:W,containerTabIndex:A,startSlot:B,endSlot:U,reference:H,containerReference:Z,onContainerFocus:V,...j}=e,G=(0,s.filterProps)(j,E),K={...(0,s.filterAriaProps)(j),...(0,s.filterDataProps)(j),id:t,title:n,role:i,tabIndex:l,placeholder:c,name:d,type:a,value:u,defaultValue:S,draggable:g,autoComplete:m,autoFocus:v,maxLength:T,min:D,max:N,step:y,pattern:I,inputMode:C,onSelect:R,onFocus:_,onBlur:b,onKeyDown:P,onKeyUp:x,onKeyPress:L,onChange:M,onDragStart:O};return r.createElement(f.ControlSkeleton,{...G,disabled:z,readonly:W,tabIndex:A,className:o(h().container,k),size:w,ref:Z,onFocus:V,startSlot:B,middleSlot:r.createElement(p.MiddleSlot,null,r.createElement("input",{...K,className:o(h().input,h()[`size-${w}`],F,B&&h()["with-start-slot"],U&&h()["with-end-slot"]),disabled:z,readOnly:W,ref:H})),endSlot:U})}function m(e){e=(0,d.useControl)(e);const{disabled:t,autoSelectOnFocus:n,tabIndex:o=0,onFocus:s,onBlur:f,reference:p,containerReference:S=null}=e,h=(0,r.useRef)(null),E=(0,r.useRef)(null),[m,v]=(0,a.useFocus)(),T=t?void 0:m?-1:o,D=t?void 0:m?o:-1,{isMouseDown:N,handleMouseDown:y,handleMouseUp:I}=(0,u.useIsMouseDown)(),C=(0,i.createSafeMulticastEventHandler)(v.onFocus,(function(e){n&&!N.current&&(0,l.selectAllContent)(e.currentTarget)}),s),R=(0,i.createSafeMulticastEventHandler)(v.onBlur,f),_=(0,r.useCallback)((e=>{h.current=e,p&&("function"==typeof p&&p(e),"object"==typeof p&&(p.current=e))}),[h,p]);return r.createElement(g,{...e,isFocused:m,containerTabIndex:T,tabIndex:D,onContainerFocus:function(e){E.current===e.target&&null!==h.current&&h.current.focus()},onFocus:C,onBlur:R,reference:_,containerReference:(0,c.useMergedRefs)([E,S]),onMouseDown:y,onMouseUp:I})}},21778:(e,t,n)=>{"use strict";n.d(t,{useControl:()=>s});var r=n(269842),o=n(383836);function s(e){const{onFocus:t,onBlur:n,intent:s,highlight:i,disabled:l}=e,[c,d]=(0,
o.useFocus)(void 0,l),a=(0,r.createSafeMulticastEventHandler)(l?void 0:d.onFocus,t),u=(0,r.createSafeMulticastEventHandler)(l?void 0:d.onBlur,n);return{...e,intent:s||(c?"primary":"default"),highlight:null!=i?i:c,onFocus:a,onBlur:u}}},603548:(e,t,n)=>{"use strict";n.d(t,{useIsMouseDown:()=>o});var r=n(50959);function o(){const e=(0,r.useRef)(!1),t=(0,r.useCallback)((()=>{e.current=!0}),[e]),n=(0,r.useCallback)((()=>{e.current=!1}),[e]);return{isMouseDown:e,handleMouseDown:t,handleMouseUp:n}}},1811:(e,t,n)=>{"use strict";function r(e){null!==e&&e.setSelectionRange(0,e.value.length)}n.d(t,{selectAllContent:()=>r})},73288:(e,t,n)=>{"use strict";n.d(t,{OverlayScrollContainer:()=>E});var r=n(50959),o=n(497754),s=n.n(o),i=n(431520),l=n(650151),c=n(822960);const d=n(660591);var a;!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e[e.HorizontalRtl=2]="HorizontalRtl"}(a||(a={}));const u={0:{isHorizontal:!1,isNegative:!1,sizePropName:"height",minSizePropName:"minHeight",startPointPropName:"top",currentMousePointPropName:"clientY",progressBarTransform:"translateY"},1:{isHorizontal:!0,isNegative:!1,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"left",currentMousePointPropName:"clientX",progressBarTransform:"translateX"},2:{isHorizontal:!0,isNegative:!0,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"right",currentMousePointPropName:"clientX",progressBarTransform:"translateX"}},f=40;function p(e){const{size:t,scrollSize:n,clientSize:o,scrollProgress:i,onScrollProgressChange:a,scrollMode:p,theme:S=d,onDragStart:h,onDragEnd:E,minBarSize:g=f}=e,m=(0,r.useRef)(null),v=(0,r.useRef)(null),[T,D]=(0,r.useState)(!1),N=(0,r.useRef)(0),{isHorizontal:y,isNegative:I,sizePropName:C,minSizePropName:R,startPointPropName:_,currentMousePointPropName:b,progressBarTransform:P}=u[p];(0,r.useEffect)((()=>{const e=(0,l.ensureNotNull)(m.current).ownerDocument;return T?(h&&h(),e&&(e.addEventListener("mousemove",W),e.addEventListener("mouseup",A))):E&&E(),()=>{e&&(e.removeEventListener("mousemove",W),e.removeEventListener("mouseup",A))}}),[T]);const x=t/n||0,L=o*x||0,M=Math.max(L,g),O=(t-M)/(t-L),w=n-t,k=I?-w:0,F=I?0:w,z=U((0,c.clamp)(i,k,F))||0;return r.createElement("div",{ref:m,className:s()(S.wrap,y&&S["wrap--horizontal"]),style:{[C]:t},onMouseDown:function(e){if(e.isDefaultPrevented())return;e.preventDefault();const t=B(e.nativeEvent,(0,l.ensureNotNull)(m.current)),n=Math.sign(t),r=(0,l.ensureNotNull)(v.current).getBoundingClientRect();N.current=n*r[C]/2;let o=Math.abs(t)-Math.abs(N.current);const s=U(w);o<0?(o=0,N.current=t):o>s&&(o=s,N.current=t-n*s);a(H(n*o)),D(!0)}},r.createElement("div",{ref:v,className:s()(S.bar,y&&S["bar--horizontal"]),style:{[R]:g,[C]:M,transform:`${P}(${z}px)`},onMouseDown:function(e){e.preventDefault(),N.current=B(e.nativeEvent,(0,l.ensureNotNull)(v.current)),D(!0)}},r.createElement("div",{className:s()(S.barInner,y&&S["barInner--horizontal"])})));function W(e){const t=B(e,(0,l.ensureNotNull)(m.current))-N.current;a(H(t))}function A(){D(!1)}function B(e,t){
const n=t.getBoundingClientRect()[_];return e[b]-n}function U(e){return e*x*O}function H(e){return e/x/O}}var S=n(522224),h=n(691504);function E(e){const{reference:t,className:n,containerHeight:s=0,containerWidth:l=0,contentHeight:c=0,contentWidth:d=0,scrollPosTop:a=0,scrollPosLeft:u=0,onVerticalChange:f,onHorizontalChange:E,visible:g}=e,[m,v]=(0,S.useHover)(),[T,D]=(0,r.useState)(!1),N=s<c,y=l<d,I=N&&y?8:0;return r.createElement("div",{...v,ref:t,className:o(n,h.scrollWrap),style:{visibility:g||m||T?"visible":"hidden"}},N&&r.createElement(p,{size:s-I,scrollSize:c-I,clientSize:s-I,scrollProgress:a,onScrollProgressChange:function(e){f&&f(e)},onDragStart:C,onDragEnd:R,scrollMode:0}),y&&r.createElement(p,{size:l-I,scrollSize:d-I,clientSize:l-I,scrollProgress:u,onScrollProgressChange:function(e){E&&E(e)},onDragStart:C,onDragEnd:R,scrollMode:(0,i.isRtl)()?2:1}));function C(){D(!0)}function R(){D(!1)}}},535842:(e,t,n)=>{"use strict";n.d(t,{SizeContext:()=>i});var r,o,s=n(50959);!function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"}(r||(r={})),function(e){e[e.Select=0]="Select",e[e.Click=1]="Click"}(o||(o={}));const i=s.createContext({size:0,smallSizeTreeNodeAction:1})},849392:(e,t,n)=>{"use strict";n.d(t,{dropSelection:()=>f,endDrag:()=>I,hideDropTarget:()=>S,moveNodes:()=>E,multiSelectNext:()=>a,multiSelectPrevious:()=>d,processDropTarget:()=>u,resetTree:()=>o,scrollToId:()=>T,selectNext:()=>c,selectPrevious:()=>l,setDisabledNodes:()=>y,setFocusedNode:()=>v,setIsExpanded:()=>N,setIsSelected:()=>D,setNodes:()=>i,setSelectedIds:()=>h,startMultiSelect:()=>g,stopMultiSelect:()=>m,syncNodes:()=>s,updateDropTarget:()=>p});var r=n(471505);const o=()=>({type:r.RESET_TREE}),s=e=>({type:r.SYNC_NODES,nodes:e}),i=e=>({type:r.SET_NODES,nodes:e}),l=()=>({type:r.SELECT_PREVIOUS}),c=()=>({type:r.SELECT_NEXT}),d=()=>({type:r.MULTI_SELECT_PREVIOUS}),a=()=>({type:r.MULTI_SELECT_NEXT}),u=(e,t,n,o,s)=>({type:r.PROCESS_DROP_TARGET,dropTarget:e,dropType:t,isHoveredLeft:n,boundBox:o,isLastChild:s}),f=()=>({type:r.DROP_SELECTION}),p=(e,t,n)=>({type:r.UPDATE_DROP_TARGET,node:e,dropType:t,boundBox:n}),S=()=>({type:r.HIDE_DROP_TARGET}),h=e=>({type:r.SET_SELECTED_IDS,ids:e}),E=(e,t,n)=>({type:r.MOVE_NODES,ids:e,targetId:t,dropType:n}),g=()=>({type:r.START_MULTI_SELECT}),m=()=>({type:r.STOP_MULTI_SELECT}),v=e=>({type:r.SET_FOCUSED_NODE,nodeId:e}),T=e=>({type:r.SCROLL_TO_ID,nodeId:e}),D=(e,t,n=0)=>({type:r.SET_IS_SELECTED,nodeId:e,isSelected:t,mode:n}),N=(e,t)=>({type:r.SET_IS_EXPANDED,nodeId:e,isExpanded:t}),y=e=>({type:r.SET_DISABLED_NODES,ids:e}),I=()=>({type:r.END_DRAG})},471505:(e,t,n)=>{"use strict";n.d(t,{DROP_SELECTION:()=>a,END_DRAG:()=>R,HIDE_DROP_TARGET:()=>g,MOVE_NODES:()=>C,MULTI_SELECT_NEXT:()=>S,MULTI_SELECT_PREVIOUS:()=>p,PROCESS_DROP_TARGET:()=>h,RESET_TREE:()=>c,SCROLL_TO_ID:()=>D,SELECT_NEXT:()=>f,SELECT_PREVIOUS:()=>u,SET_DISABLED_NODES:()=>I,SET_FOCUSED_NODE:()=>T,SET_IS_EXPANDED:()=>y,SET_IS_SELECTED:()=>N,SET_NODES:()=>o,SET_SELECTED_IDS:()=>d,START_MULTI_SELECT:()=>m,STOP_MULTI_SELECT:()=>v,SYNC_NODES:()=>s,
UPDATE_DROP_TARGET:()=>E,UPDATE_NODE:()=>i,UPDATE_NODES:()=>l});const r=(0,n(215078).createActionTypeFactory)("OBJECT_TREE"),o=r("SET_NODES"),s=r("SYNC_NODES"),i=r("UPDATE_NODE"),l=r("UPDATE_NODES"),c=r("RESET_TREE"),d=r("SET_SELECTED_IDS"),a=r("DROP_SELECTION"),u=r("SELECT_PREVIOUS"),f=r("SELECT_NEXT"),p=r("MULTI_SELECT_PREVIOUS"),S=r("MULTI_SELECT_NEXT"),h=r("PROCESS_DROP_TARGET"),E=r("UPDATE_DROP_TARGET"),g=r("HIDE_DROP_TARGET"),m=r("START_MULTI_SELECT"),v=r("STOP_MULTI_SELECT"),T=(r("REMOVE_NODE"),r("SET_FOCUSED_NODE")),D=r("SCROLL_TO_ID"),N=r("SET_IS_SELECTED"),y=r("SET_IS_EXPANDED"),I=r("SET_DISABLED_NODES"),C=r("MOVE_NODES"),R=(r("START_DRAG"),r("END_DRAG"))},129881:(e,t,n)=>{"use strict";n.d(t,{dropTargetSelector:()=>l,isDisabledSelector:()=>S,isExpandedSelector:()=>p,isMultiSelectingSelector:()=>m,isSelectedSelector:()=>f,lastFocusedNodeIdSelector:()=>g,nodeIdsSelector:()=>h,nodeSelector:()=>u,nodesSelector:()=>s,orderedNodesSelector:()=>D,renderDragListSelector:()=>I,renderListSelector:()=>y,scrollToIdSelector:()=>d,selectedIdsSelector:()=>E,selectedNodesSelector:()=>v});var r=n(377145),o=n(650151);const s=e=>e.nodes,i=e=>e.selection,l=e=>e.dropTarget,c=e=>e.expanded,d=e=>e.scrollToId,a=(e,t)=>t,u=(0,r.createSelector)([s,a],((e,t)=>e[t])),f=(0,r.createSelector)([i,a],((e,t)=>e.ids.includes(t))),p=(0,r.createSelector)([c,a],((e,t)=>e.includes(t))),S=(0,r.createSelector)([e=>e.disabled,i,a],((e,t,n)=>!t.ids.includes(n)&&e.includes(n))),h=(0,r.createSelector)(s,(e=>Object.keys(e))),E=(0,r.createSelector)(i,(({ids:e})=>e)),g=(0,r.createSelector)(i,(({lastFocusedNodeId:e})=>e)),m=(0,r.createSelector)(i,(({isMultiSelecting:e})=>e)),v=(0,r.createSelector)([s,E],((e,t)=>t.map((t=>e[t])))),T=(0,r.createSelector)(s,(e=>Object.values(e).filter((e=>0===e.level)))),D=(0,r.createSelector)([s,T],((e,t)=>t.reduce(((t,n)=>[...t,...N(e,(0,o.ensureDefined)(n))]),[])));function N(e,t){const n=[];for(const r of t.children)n.push(e[r]),n.push(...N(e,e[r]));return n}const y=(0,r.createSelector)([s,T,c],((e,t,n)=>{const r=new Set(n);return t.reduce(((t,n)=>[...t,...C(e,(0,o.ensureDefined)(n),r)]),[])})),I=(0,r.createSelector)([s,E,c],((e,t,n)=>{const r=new Set(n);return[{id:"drag-list",level:-1,children:t}].reduce(((t,n)=>[...t,...C(e,(0,o.ensureDefined)(n),r)]),[])}));function C(e,t,n){const r=[];for(const o of t.children){const t=e[o];void 0!==t&&(r.push(t),n.has(o)&&r.push(...C(e,t,n)))}return r}},451539:(e,t,n)=>{"use strict";n.d(t,{getInsertIndex:()=>i,logger:()=>s});var r=n(937778),o=n(650151);const s=(0,r.getLogger)("Platform.GUI.ObjectTree.CallApi"),i=(e,t,n)=>{switch(n){case"before":return e.indexOf((0,o.ensureDefined)(t));case"inside":return e.length;case"after":return e.indexOf((0,o.ensureDefined)(t))+1;default:return 0}}},733393:(e,t,n)=>{"use strict";n.d(t,{Tree:()=>Me});var r=n(50959),o=n(746212),s=n(743766),i=n(10170),l=n(207809),c=n(394212),d=n(129885),a=n(471505),u=n(849392),f=n(129881);function*p(e){const{selectedIds:t,nodes:n}=yield(0,d.call)(e),r={};for(let e=0;e<n.length;++e){const t=n[e];r[t.id]=t}yield(0,
d.put)((0,u.setNodes)(r)),yield(0,d.put)((0,u.setSelectedIds)(t));!(0,f.lastFocusedNodeIdSelector)(yield(0,d.select)())&&t.length>0&&(yield(0,d.put)((0,u.setFocusedNode)(t[0])),yield(0,d.put)((0,u.scrollToId)(t[0])))}var S=n(650151);function*h(e){for(;;){if((yield(0,d.take)([a.START_MULTI_SELECT,a.STOP_MULTI_SELECT])).type===a.START_MULTI_SELECT){const t=(0,f.nodeIdsSelector)(yield(0,d.select)()).filter((t=>!e(t)));yield(0,d.put)((0,u.setDisabledNodes)(t))}else yield(0,d.put)((0,u.setDisabledNodes)([]))}}function*E(){for(;;){const{type:e}=yield(0,d.take)([a.MULTI_SELECT_NEXT,a.MULTI_SELECT_PREVIOUS]),t=yield(0,d.select)(),n=(0,f.orderedNodesSelector)(t),r=n.length,o=(0,f.lastFocusedNodeIdSelector)(t),s=[...(0,f.selectedIdsSelector)(t)],i=1===s.length&&s[0]!==o,l=n.findIndex((e=>e.id===(i?s[0]:o)));if(e===a.MULTI_SELECT_PREVIOUS&&0===l||e===a.MULTI_SELECT_NEXT&&l===r-1)continue;const c=y(t,e===a.MULTI_SELECT_NEXT?"next":"previous",n,l),{id:p}=c;s.includes(p)&&o?(yield(0,d.put)((0,u.setIsSelected)(o,!1,1)),yield(0,d.put)((0,u.setFocusedNode)(p))):yield(0,d.put)((0,u.setIsSelected)(p,!0,1)),yield(0,d.put)((0,u.scrollToId)(p))}}function*g(e,t){for(;;){const{type:n}=yield(0,d.take)([a.SELECT_NEXT,a.SELECT_PREVIOUS]),r=yield(0,d.select)(),o=(0,f.orderedNodesSelector)(r),s=(0,f.selectedNodesSelector)(r),i=(0,f.lastFocusedNodeIdSelector)(r);if(1===s.length&&s[0].id!==i&&!i){if(n===a.SELECT_NEXT){yield(0,d.put)((0,u.setFocusedNode)(s[0].id));continue}if(n===a.SELECT_PREVIOUS){const e=o.findIndex((e=>e.id===s[0].id)),t=y(r,"previous",o,e);yield(0,d.put)((0,u.setFocusedNode)(t.id));continue}}const l=o.findIndex((e=>e.id===i)),c=n===a.SELECT_NEXT?"next":"previous",p=y(r,c,o,l),{id:S}=p;e?e([S],c):yield(0,d.put)((0,u.setSelectedIds)([S])),t&&t(S),yield(0,d.put)((0,u.setFocusedNode)(S))}}function*m(e,t=(()=>!0)){for(;;){const{mode:n,nodeId:r,isSelected:o}=yield(0,d.take)(a.SET_IS_SELECTED);let s=[...(0,f.selectedIdsSelector)(yield(0,d.select)())];const i=(0,f.orderedNodesSelector)(yield(0,d.select)());if(1===n)o?s.push(r):s.splice(s.indexOf(r),1);else if(2===n&&s.length>0){const e=(0,f.lastFocusedNodeIdSelector)(yield(0,d.select)());let n=i.findIndex((t=>t.id===e));-1===n&&(n=i.reduce(((e,t,n)=>s.includes(t.id)?n:e),-1));const o=i.findIndex((e=>e.id===r));if(n!==o)for(let e=Math.min(n,o);e<=Math.max(n,o);e++){const n=i[e].id;!s.includes(n)&&t(n)&&s.push(n)}}else s=r?[r]:[];const l=new Set(s);s=i.reduce(((e,t)=>(l.has(t.id)&&e.push(t.id),e)),[]),e?e(s):yield(0,d.put)((0,u.setSelectedIds)(s)),yield(0,d.put)((0,u.setFocusedNode)(r))}}function*v(e=(()=>!0),t){const{dropTarget:n,dropType:r,isHoveredLeft:o,boundBox:s,isLastChild:i}=t,l=(0,f.dropTargetSelector)(yield(0,d.select)()),c=(0,f.nodeSelector)(yield(0,d.select)(),(0,S.ensureDefined)(n.parentId)),a=i&&"after"===r,p=(0,f.selectedNodesSelector)(yield(0,d.select)()),h=!a||!o&&e(p,n,r)?n:c,E=l.node&&l.node.id!==h.id||l.dropType!==r;p.map((e=>e.id)).includes(h.id)?yield(0,d.put)((0,u.hideDropTarget)()):E&&e(p,h,r)&&(yield(0,d.put)((0,u.updateDropTarget)(h,r,s)))}function*T(e){yield(0,
d.throttle)(0,a.PROCESS_DROP_TARGET,v,e)}function*D(e){for(;;){yield(0,d.take)(a.DROP_SELECTION);const t=(0,f.selectedNodesSelector)(yield(0,d.select)()),{node:n,dropType:r}=(0,f.dropTargetSelector)(yield(0,d.select)());if(n&&r){const o=new CustomEvent("tree-node-drop",{detail:{nodes:t,target:n.id,type:r}});if(e&&e(o),!o.defaultPrevented){const e=(0,f.selectedIdsSelector)(yield(0,d.select)());yield(0,d.put)((0,u.moveNodes)(e,n.id,r))}}}}function*N(e){for(;;){yield(0,d.take)(a.MOVE_NODES);e((0,f.nodesSelector)(yield(0,d.select)()))}}function y(e,t,n,r){const o=n.length;let s;-1===r&&"previous"===t&&(r=o);let i=0;for(;!s||Math.abs(i)<o&&((l=s).level>1&&!(0,f.isExpandedSelector)(e,(0,S.ensureDefined)(l.parentId)));)i+="next"===t?1:-1,s=n[(r+i+o)%o];var l;return s}function*I(e={}){const{saga:t,onDrop:n,canMove:r,onMove:o,onSelect:s,onKeyboardSelect:i,initState:l,canBeAddedToSelection:c}=e,u=[(0,d.fork)(T,r),(0,d.fork)(D,n),(0,d.fork)(m,s,c),(0,d.fork)(g,s,i),(0,d.fork)(E)];for(t&&u.push((0,d.fork)(t)),o&&u.push((0,d.fork)(N,o)),c&&u.push((0,d.fork)(h,c));;){l&&(yield(0,d.call)(p,l));const e=yield(0,d.all)(u);yield(0,d.take)(a.RESET_TREE);for(const t of e)yield(0,d.cancel)(t)}}var C=n(406047),R=n(41899),_=n(451539);const b={ids:[],lastFocusedNodeId:void 0,isMultiSelecting:!1};const P={node:void 0,dropType:void 0,boundBox:void 0};const x=(0,C.combineReducers)({nodes:function(e={},t){switch(t.type){case a.SET_NODES:return t.nodes;case a.SYNC_NODES:{const{nodes:n}=t,r=n.map((e=>e.id)),o={...e};for(const t of Object.keys(e))if(!r.includes(t)){const{parentId:e}=o[t];e&&(o[e]={...o[e],children:o[e].children.filter((e=>e!==t))}),delete o[t]}for(const e of n){const t=e.id;if(o.hasOwnProperty(t)){!(0,R.deepEquals)(o[t].children,e.children)[0]&&(o[t]={...o[t],children:[...e.children]})}else{o[t]=e;const{parentId:n}=e;if(n&&!o[n].children.includes(t))throw new Error("Not implemented")}}return o}case a.UPDATE_NODE:{const{type:n,nodeId:r,...o}=t;return{...e,[r]:{...e[r],...o}}}case a.UPDATE_NODES:{const{nodes:n}=t,r={...e};return Object.keys(n).forEach((e=>{r[e]={...r[e],...n[e]}})),{...e,...r}}case a.MOVE_NODES:{const{ids:n,targetId:r,dropType:o}=t,s=(0,S.ensureDefined)(e[r].parentId),i=e[s],l={};for(const t of n){const n=e[t];if(n.parentId){const r=l[n.parentId]||e[n.parentId];l[n.parentId]={...r,children:r.children.filter((e=>e!==t))}}l[t]={...n,parentId:s,level:i.level+1}}const c=i.children.filter((e=>!n.includes(e)));return c.splice((0,_.getInsertIndex)(c,r,o),0,...n),l[s]={...e[s],children:c,isExpanded:!0},{...e,...l}}default:return e}},selection:function(e=b,t){switch(t.type){case a.SET_SELECTED_IDS:{const{ids:n}=t;return{...e,ids:n,lastFocusedNodeId:n.length>0?e.lastFocusedNodeId:void 0}}case a.START_MULTI_SELECT:return{...e,isMultiSelecting:!0};case a.STOP_MULTI_SELECT:return{...e,isMultiSelecting:!1};case a.SET_FOCUSED_NODE:return{...e,lastFocusedNodeId:t.nodeId};case a.SYNC_NODES:{const n=new Set(t.nodes.map((e=>e.id)));return e.lastFocusedNodeId&&!n.has(e.lastFocusedNodeId)&&delete e.lastFocusedNodeId,{...e,
ids:e.ids.filter((e=>n.has(e)))}}default:return e}},dropTarget:function(e=P,t){switch(t.type){case a.UPDATE_DROP_TARGET:{const{node:n,dropType:r,boundBox:o}=t;return{...e,node:n,dropType:r,boundBox:o}}case a.HIDE_DROP_TARGET:case a.END_DRAG:case a.RESET_TREE:return{...P};default:return e}},expanded:function(e=[],t){if(t.type===a.SET_IS_EXPANDED){const{nodeId:n,isExpanded:r}=t;if(r)return[...e,n];const o=[...e];return o.splice(e.indexOf(n),1),o}return e},disabled:function(e=[],t){return t.type===a.SET_DISABLED_NODES?[...t.ids]:e},scrollToId:function(e=null,t){return t.type===a.SCROLL_TO_ID?null===t.nodeId?null:{id:t.nodeId}:e}});var L=n(497754),M=n.n(L),O=n(868788),w=n(469690),k=n(584952),F=n(601227);var z=n(116812),W=n(298314),A=n(72571),B=n(180185),U=n(269842),H=n(522224),Z=n(535842);const V={[B.Modifiers.Mod]:1,[B.Modifiers.Shift]:2};var j=n(569533),G=n(745721);const K=()=>{};class X extends r.PureComponent{constructor(){super(...arguments),this._ref=null,this._handleRef=e=>{this._ref=e;const{connectDragSource:t,connectDropTarget:n,connectDragPreview:r}=this.props;(0,S.ensureDefined)(n)(this._ref),(0,S.ensureDefined)(t)(this._ref),(0,S.ensureDefined)(r)((0,W.getEmptyImage)(),{captureDraggingState:!0})},this._handleTouchStart=e=>{const t=(e,t)=>{const n=function(e,t){try{const n=document.createEvent("TouchEvent");return n.initTouchEvent(e,!0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,t.touches,t.targetTouches,t.changedTouches),n}catch(e){return null}}(e,t);if(n)return n;const r=Array.from(t.changedTouches),o=Array.from(t.touches),s=Array.from(t.targetTouches);return new TouchEvent(e,{bubbles:!0,changedTouches:r,touches:o,targetTouches:s})},n=e.target;if(n instanceof Element){const e=e=>{const r=e;if(!n.isConnected){r.preventDefault();const e=t("touchmove",r);document.body.dispatchEvent(e)}},r=o=>{const s=o;if(!n.isConnected){s.preventDefault();const e=t("touchend",s);document.body.dispatchEvent(e)}n.removeEventListener("touchend",r),n.removeEventListener("touchmove",e)};n.addEventListener("touchend",r),n.addEventListener("touchmove",e)}}}componentDidMount(){var e;null===(e=this._ref)||void 0===e||e.addEventListener("touchstart",this._handleTouchStart)}componentWillUnmount(){var e;null===(e=this._ref)||void 0===e||e.removeEventListener("touchstart",this._handleTouchStart)}render(){return r.createElement($,{...this.props,reference:this._handleRef})}getNode(){return(0,S.ensureNotNull)(this._ref)}}const $=e=>{const{id:t,isSelected:n,isOffset:o,isExpandable:s,setIsSelected:i,isDisabled:l,isExpanded:c,onClick:d,parentId:a,setIsExpanded:u,reference:f,isFirstListItem:p,isLastListItem:S,nodeRenderer:h,isChildOfSelected:E=!1,isStuckNode:g}=e,{size:m,smallSizeTreeNodeAction:v}=(0,r.useContext)(Z.SizeContext),T=(0,r.useRef)(null),D=(0,U.createSafeMulticastEventHandler)((e=>T.current=e),f);let[N,y]=(0,H.useHover)();return(F.CheckMobile.any()||F.CheckMobile.isIPad())&&(N=n,y={onMouseOut:K,onMouseOver:K}),r.createElement("div",{
className:L(G.wrap,n&&G.selected,E&&G.childOfSelected,l&&G.disabled,s&&G.expandable),onClick:1===m&&0===v?I:function(e){if(e.defaultPrevented)return;const r=V[(0,B.modifiersFromEvent)(e)]||0;!l&&i&&i(t,!n,r);d&&0===r&&d(e,t)},onContextMenu:I,ref:D,...y},s&&r.createElement(A.Icon,{icon:j,className:L(G.expandHandle,c&&G.expanded),onClick:function(e){e.preventDefault(),s&&u(t,!c)},onMouseDown:function(e){e.preventDefault()}}),h({id:t,isOffset:o,parentId:a,isDisabled:l,isSelected:n,isChildOfSelected:E,isHovered:N,isExpanded:c,isFirstListItem:p,isLastListItem:S,isStuckNode:g}));function I(){l||n||!i||i(t,!0)}},q=r.createContext({});function Y(e,t){const{id:n}=t,r=(0,f.nodeSelector)(e,n),o=(0,f.isSelectedSelector)(e,n);let s=!1,i=r.parentId;for(;i&&!s;)s=(0,f.isSelectedSelector)(e,i),i=(0,f.nodeSelector)(e,i).parentId;return{...r,isSelected:o,isChildOfSelected:s,isExpanded:r.children.length>0&&(0,f.isExpandedSelector)(e,n),isExpandable:r.children.length>0,isDisabled:(0,f.isDisabledSelector)(e,n)}}function J(e){return(0,C.bindActionCreators)({setIsExpanded:u.setIsExpanded,processDropTarget:u.processDropTarget,dropSelection:u.dropSelection,selectNext:u.selectNext,selectPrevious:u.selectPrevious,setIsSelected:u.setIsSelected,endDrag:u.endDrag},e)}const Q=(0,s.connect)(Y,J,null,{context:q})((function(e){const t=(0,r.useRef)(null),[,n,o]=(0,z.useDrag)({type:"node",item:t=>{const{id:n,isDisabled:r,isSelected:o}=e;return r||o||e.setIsSelected(n,!0),e},end:e=>{e.endDrag()}}),[,s]=(0,w.useDrop)({accept:"node",hover:(n,r)=>{const o=t.current;if(!o)return;if(e.isStuckNode)return;const s=o.getNode(),i=s.getBoundingClientRect(),l=i.bottom-i.top,c=r.getClientOffset();if(c){const t=c.y-i.top;let n,r;if(n=0===e.children.length?t<l/2?"before":"after":t<l/3?"before":e.isExpanded||t>=l/3&&t<2*l/3?"inside":"after",void 0!==e.getContainerElement){const t=e.getContainerElement().getBoundingClientRect();r={top:i.top-t.top,left:i.left-t.left,bottom:i.top-t.top+i.height,right:i.left-t.left+i.width,height:i.height,width:i.width}}else r={top:s.offsetTop,left:s.offsetLeft,bottom:s.offsetTop+s.offsetHeight,right:s.offsetLeft+s.offsetWidth,height:s.offsetHeight,width:s.offsetWidth};e.processDropTarget(e,n,c.x-i.left<48,r,e.isLastChild)}}});return r.createElement(X,{...e,connectDragSource:n,connectDropTarget:s,connectDragPreview:o,ref:t})})),ee=(0,s.connect)(Y,J,null,{context:q})($);var te=n(698043),ne=n(365982),re=n(813113);function oe(e){const t=e(),n=(0,r.useRef)(t);n.current=t;const[o,s]=(0,r.useState)(n.current),i=(0,r.useRef)(null);return(0,r.useEffect)((()=>{null===i.current&&(i.current=requestAnimationFrame((()=>{i.current=null,s(n.current)})))})),(0,r.useEffect)((()=>()=>{i.current&&cancelAnimationFrame(i.current)}),[]),o}function se(e){const{dropTargetOffset:t,mousePosition:n}=e;if(!t)return{display:"none"};const{x:r,y:o}=t,s=n&&t?n.y-t.y:0,i=`translate(${r+(n&&t?n.x-t.x:0)}px, ${o+s}px)`;return{transform:i,WebkitTransform:i}}const ie={top:0,left:0,position:"fixed",pointerEvents:"none",zIndex:100,opacity:.5,width:300,backgroundColor:"red"}
;function le(e){return{isDragging:e.isDragging()&&"node"===e.getItemType(),mousePosition:e.getClientOffset(),dropTargetOffset:e.getSourceClientOffset()}}const ce=(0,s.connect)((function(e){return{items:(0,f.renderDragListSelector)(e)}}),null,null,{context:q})((function(e){const{items:t,isDragging:n,nodeRenderer:o,dragPreviewRenderer:s}=e;return oe((function(){return n?r.createElement(re.Portal,null,r.createElement("div",{style:{...ie,...se(e)}},t.map((e=>{if(s){const t=s;return r.createElement(t,{key:e.id,...e})}return r.createElement(ee,{id:e.id,key:e.id,nodeRenderer:o,isDragPreview:!0,isOffset:e.level>1})})))):null}))}));function de(e){return r.createElement(ce,{...e,...(0,ne.useDragLayer)(le)})}var ae=n(693838),ue=n(73288),fe=n(139043);const pe=r.forwardRef(((e,t)=>{const n=(0,r.useRef)(null);return e.connectDropTarget(n),(0,r.useImperativeHandle)(t,(()=>({getNode:()=>(0,S.ensureNotNull)(n.current)})),[]),r.createElement("div",{ref:n,style:{height:"100%",width:"100%"}})}));function Se(e){const t=(0,r.useRef)(null),[,n]=(0,w.useDrop)({accept:"node",hover:(n,r)=>{if(!t.current)return;const o=r.getClientOffset();if(null===o)return;const s=e.getOrderedNodes();if(0===s.length)return;const i=t.current.getNode().getBoundingClientRect(),l=e.getContainerElement().getBoundingClientRect();if("first"===e.type){const t={top:i.top-l.top+i.height,left:i.left-l.left,bottom:i.top-l.top+i.height,right:i.left-l.left+i.width,height:0,width:i.width};e.processDropTarget(s[0],"before",!1,t,!1)}if("last"===e.type){const t=o.x-i.left<48,n=s[s.length-1],r=t&&2===n.level?(0,S.ensureDefined)(s.find((e=>e.id===n.parentId))):n,c={top:i.top-l.top,left:i.left-l.left,bottom:i.top-l.top,right:i.left-l.left+i.width,height:i.height,width:i.width};e.processDropTarget(r,"after",t,c,!1)}}});return r.createElement(pe,{...e,connectDropTarget:n,ref:t})}const he=r.createContext({isOver:!1,transform:void 0});var Ee=n(59385);function ge(e){const{dropType:t,boundBox:n}=e,{top:r,bottom:o,left:s}=(0,S.ensureDefined)(n);return[s,"before"===t||"inside"===t?r:o]}function me(e){return{isDragging:e.isDragging()}}const ve=(0,s.connect)((function(e){const{boundBox:t,dropType:n,node:r}=(0,f.dropTargetSelector)(e);return{boundBox:t,dropType:n,level:r?r.level:void 0}}),null,null,{context:q})((function(e){const{dropType:t,boundBox:n,isDragging:o,level:s,transform:i=ge}=e;return oe((function(){if(!o||!t||!n)return null;const l={[Ee.dropTarget]:"inside"!==t,[Ee.dropTargetInside]:"inside"===t},{width:c,height:d}=n,[a,u]=i(e),f=`translate(${a}px, ${"inside"===t?u:u-1}px)`;return r.createElement("div",{className:L(l),style:{position:"absolute",transform:f,WebkitTransform:f,top:0,left:2===s?"46px":0,width:2===s?c-46+"px":c,height:"inside"===t?d:"2px"}})}))}));function Te(e){const{isDragging:t}=(0,ne.useDragLayer)(me);return r.createElement(ve,{...e,isDragging:t})}const De=r.createContext(null);var Ne=n(612356),ye=n.n(Ne);const Ie=r.forwardRef(((e,t)=>{const n=(0,r.useContext)(he),o=(0,r.useContext)(De),s=(0,
r.useMemo)((()=>(null==o?void 0:o.readOnly)?ee:Q),[null==o?void 0:o.readOnly]);return r.createElement("div",{...e,ref:t},(null==o?void 0:o.id)?r.createElement("div",{className:M()(ye().sticky,!o.isShowStuck&&ye().hideSticky)},r.createElement(s,{id:o.id,key:o.id,isStuckNode:!0,nodeRenderer:o.nodeRenderer,readOnly:o.readOnly,onClick:o.onClick,getContainerElement:o.getContainerElement})):null,e.children,n.isOver&&r.createElement(Te,{transform:n.transform}))}));var Ce=n(431520),Re=n(389791);const _e=38+B.Modifiers.Shift,be=40+B.Modifiers.Shift;const Pe=r.forwardRef((function(e,t){const{navigationKeys:n,renderList:o,stopMultiSelect:s,startMultiSelect:i,isMultiSelecting:l,nodeRenderer:c,dragPreviewRenderer:d,className:a,connectDropTarget:u,readOnly:f,onClick:p,dropLayerTransform:h,setFocusedNode:E,scrollToId:g,rowHeight:m,onMultiSelectPrevious:v,onMultiSelectNext:T,onMoveCursorToNext:D,onMoveCursorToPrevious:N,onKeyDown:y,outerRef:I,width:C,height:R,isOver:_,processDropTarget:b,autofocus:P}=e,[x,L]=(0,r.useState)(),[w,z]=(0,r.useState)(!0),W=(0,r.useContext)(ae.ObjectTreeContext),A=(0,r.useRef)(null),U=(0,O.useDragDropManager)();(0,r.useEffect)((()=>{const e=U.getMonitor();e.subscribeToStateChange((()=>z(!e.isDragging())))}),[]),(0,r.useEffect)((()=>{var e;P&&(null===(e=A.current)||void 0===e||e.focus())}),[]),(0,r.useEffect)((()=>{const e=e=>{[B.Modifiers.Mod,B.Modifiers.Shift].includes((0,B.modifiersFromEvent)(e))&&i()},t=e=>{l&&![B.Modifiers.Mod,B.Modifiers.Shift].includes((0,B.modifiersFromEvent)(e))&&s()};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),document.addEventListener("mousemove",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t),document.removeEventListener("mousemove",t)}}),[l]),function(e){(0,r.useEffect)((()=>{if(F.isEdge){let t=null;const n=(0,S.ensureNotNull)(e.current),r=e=>{if(e.target instanceof Element){const n=(0,S.ensureNotNull)(e.target.closest("[draggable]"));n instanceof HTMLElement&&(n.style.opacity="0",t=requestAnimationFrame((()=>n.style.opacity="1")))}};return n.addEventListener("dragstart",r),()=>{n.removeEventListener("dragstart",r),null!==t&&cancelAnimationFrame(t)}}return()=>{}}),[])}(A);const H=(0,r.useCallback)((()=>(0,S.ensureNotNull)(se.current)),[]),Z=(0,r.useCallback)((()=>o),[o]),V=(0,r.useMemo)((()=>{const e=f?ee:Q,t=[];let n,s;t.push({type:"padding",node:r.createElement(Se,{type:"first",key:"padding-top",getContainerElement:H,getOrderedNodes:Z,processDropTarget:b})});for(let i=0;i<o.length;i++){const l=o[i];l.isSticky&&(s=l.id),1===l.level&&(void 0!==n&&n!==l.parentId&&t.push({type:"separator",node:r.createElement("div",{key:n+"_separator",className:Re.separator})}),n=l.parentId),t.push({type:"node",stickyNodeId:s,isSticky:l.isSticky,node:r.createElement(e,{id:l.id,key:l.id,isFirstListItem:0===i,isLastListItem:i===o.length-1,isExpandable:l.children.length>0,nodeRenderer:c,readOnly:f,onClick:p,isOffset:l.level>1,getContainerElement:H})})}return t.push({type:"padding",node:r.createElement(Se,{type:"last",
key:"padding-bottom",getContainerElement:H,getOrderedNodes:Z,processDropTarget:b})}),t}),[o]),j=(0,r.useMemo)((()=>{if(x){const e=V[x];return e&&"stickyNodeId"in e?e.stickyNodeId:void 0}}),[x,V]),G=(0,r.useRef)([]);G.current=V;const K=(0,r.useCallback)((e=>{var t,n;let{style:o}=e;const{index:s}=e,i=G.current[s];return s===G.current.length-1&&(o={...o,bottom:0,minHeight:o.height},delete o.height),"isSticky"in i&&i.isSticky&&(o={...o,zIndex:(null===(t=ne.current)||void 0===t?void 0:t.scrollTop)&&o.top&&+o.top<=(null===(n=ne.current)||void 0===n?void 0:n.scrollTop)?2:5}),r.createElement("div",{style:o},G.current[s].node)}),[]),X=(0,r.useCallback)((e=>{const t=G.current[e];return"padding"===t.type?6:"function"==typeof m?m(e,t):m}),[m]),$=(0,r.useCallback)((e=>(0,S.ensure)(G.current[e].node.key)),[]),q=(0,r.useMemo)((()=>null===g?{index:-1}:{index:G.current.findIndex((e=>e.node.key===g.id))}),[g]);u(A);const[Y,J,ne,re]=(0,fe.useOverlayScroll)(),oe=(0,r.useRef)(null);(0,r.useEffect)((()=>(0,S.ensureNotNull)(oe.current).resetAfterIndex(0,!0)),[V]),(0,r.useEffect)((()=>{let e=q.index;const t=G.current[q.index];x&&e<=x&&t&&"stickyNodeId"in t&&t.stickyNodeId&&(e-=1),(0,S.ensureNotNull)(oe.current).scrollToItem(e)}),[q]);const se=(0,r.useRef)(null),ie=(0,r.useMemo)((()=>({isOver:_,transform:h})),[_,h]),le=(0,r.useMemo)((()=>({id:j,nodeRenderer:c,getContainerElement:H,onClick:p,isShowStuck:w,readOnly:f})),[j,c,H,w,p,f]),ce=(0,r.useRef)(null),pe=(0,r.useRef)({startScroll(e){const t=()=>{null!==ne.current&&(ce.current=requestAnimationFrame(t),ne.current.scrollBy({top:e}))};this.stopScroll(),t()},stopScroll(){null!==ce.current&&(cancelAnimationFrame(ce.current),ce.current=null)},getListElement:()=>ne.current});return(0,r.useImperativeHandle)(t,(()=>pe.current),[]),(0,r.useEffect)((()=>()=>pe.current.stopScroll()),[_]),(0,r.useEffect)((()=>{if(!A.current)return;function e(e){if(!t.matches(":focus-visible"))return;if(!W)return;const{viewModel:n}=W,r=n.selection();e.defaultPrevented||e.currentTarget!==e.target||r.selected().length||D()}const t=A.current;return t.addEventListener("focus",e),()=>{t.removeEventListener("focus",e)}}),[A,D,W]),r.createElement(he.Provider,{value:ie},r.createElement(De.Provider,{value:le},r.createElement("div",{...J,className:M()(Re.tree,a),ref:A,"data-name":"tree",tabIndex:0,onKeyDown:function(e){const t=(0,B.hashFromEvent)(e);if(e.defaultPrevented||(0,te.isNativeUIInteraction)(t,e.target))return;const r=(0,S.ensureDefined)(Y.scrollPosTop),o=(0,S.ensureDefined)(Y.contentHeight),s=(0,S.ensureDefined)(Y.containerHeight);if(s){const n=.875*s,i=r+s===o;switch(t){case 35:i||(e.preventDefault(),Ee(o));break;case 36:0!==r&&(e.preventDefault(),Ee(0));break;case 33:0!==r&&(e.preventDefault(),Ee(Math.max(0,r-n)));break;case 34:i||(e.preventDefault(),Ee(Math.min(r+n,o)))}}W||t!==_e||(e.preventDefault(),v());W||t!==be||(e.preventDefault(),T());(38===t||void 0!==n&&"previous"===n[t])&&(e.preventDefault(),N());(40===t||void 0!==n&&"next"===n[t])&&(e.preventDefault(),D());if((8===t||46===t)&&W){
const{viewModel:e}=W,t=e.selection(),n=t.selected();if(1!==n.length)return;const r=e.getNextNodeIdAfterRemove(n[0]);if(null===r)return;e.onChange().subscribe(null,(()=>{if(t.selected().length)return;const n=e.entity(r);n&&(t.set([n]),E(r))}),!0)}null==y||y(e)}},r.createElement(ue.OverlayScrollContainer,{...Y,className:Re.overlayScrollWrap}),r.createElement(k.VariableSizeList,{ref:function(e){oe.current=e},className:Re.listContainer,width:C,height:R,itemCount:V.length,itemSize:X,children:K,itemKey:$,outerRef:function(e){ne.current=e,I&&I(e)},innerRef:function(e){se.current=e},innerElementType:Ie,onItemsRendered:function({visibleStartIndex:e}){L(e),re()},overscanCount:20,direction:(0,Ce.isRtl)()?"rtl":"ltr"}),r.createElement(de,{dragPreviewRenderer:d,nodeRenderer:c}))));function Ee(e){var t;null===(t=ne.current)||void 0===t||t.scrollTo({left:0,top:e})}}));const xe=(0,s.connect)((function(e){return{renderList:(0,f.renderListSelector)(e),orderedNodes:(0,f.orderedNodesSelector)(e),isMultiSelecting:(0,f.isMultiSelectingSelector)(e),selectedIds:(0,f.selectedIdsSelector)(e),scrollToId:(0,f.scrollToIdSelector)(e)}}),(function(e){return(0,C.bindActionCreators)({startMultiSelect:u.startMultiSelect,stopMultiSelect:u.stopMultiSelect,setFocusedNode:u.setFocusedNode,processDropTarget:u.processDropTarget,onMoveCursorToNext:u.selectNext,onMoveCursorToPrevious:u.selectPrevious,onMultiSelectPrevious:u.multiSelectPrevious,onMultiSelectNext:u.multiSelectNext},e)}),null,{context:q})((function(e){const t=(0,r.useRef)(null),[{isOver:n},o]=(0,w.useDrop)({accept:"node",drop:(n,r)=>{var o;("touch"===e.drag||F.isFF)&&(null===(o=t.current)||void 0===o||o.stopScroll()),r.getItem().dropSelection()},hover:(n,r)=>{var o,s;if("touch"!==e.drag&&!F.isFF)return;const i=r.getClientOffset();if(null===i)return;const l=null!==(s=null===(o=t.current)||void 0===o?void 0:o.getListElement())&&void 0!==s?s:null;if(null===l)return;const c=l.getBoundingClientRect();((n,r,o)=>{var s;const i=Math.abs(n-o),l=Math.abs(n-r);if(l>40&&i>40||i<=40&&l<=40)return void(null===(s=t.current)||void 0===s||s.stopScroll());((n,r,o,s)=>{var i,l,c,d;r||n?"touch"===e.drag?null===(i=t.current)||void 0===i||i.startScroll(r?-5:5):null===(l=t.current)||void 0===l||l.startScroll(r?-2:2):(o||s)&&("touch"===e.drag?null===(c=t.current)||void 0===c||c.startScroll(o?-10:10):null===(d=t.current)||void 0===d||d.startScroll(o?-5:5))})(l>20&&l<=40,i>20&&i<=40,i<=20,l<=20)})(i.y,c.bottom,c.top)},collect:e=>({isOver:e.isOver()})});return r.createElement(Pe,{...e,isOver:n,connectDropTarget:o,ref:t})})),Le={delayTouchStart:100};function Me(e){const{canBeAddedToSelection:t,initState:n,onSelect:s,canMove:i,onDrop:l,onMove:c,nodes:d,selectedIds:a,onKeyboardSelect:f,saga:p,lastFocusedNodeObject:S,lastSyncTimestampRef:h,scrollToId:E,...g}=e,[m,v]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const e=(0,o.default)();v(function(e){const t=(0,C.applyMiddleware)(e);return(0,C.createStore)(x,t)}(e));const r=e.run(I,{initState:n,onKeyboardSelect:f,saga:p,canMove:i,onMove:c,onDrop:l,onSelect:s,
canBeAddedToSelection:t});return()=>r.cancel()}),[]),(0,r.useEffect)((()=>(null!==m&&d&&(h&&(h.current=performance.now()),m.dispatch((0,u.syncNodes)(d))),()=>{})),[m,d]),(0,r.useEffect)((()=>{null!==m&&a&&m.dispatch((0,u.setSelectedIds)(a))}),[m,a]),(0,r.useEffect)((()=>{null!==m&&(null==S?void 0:S.id)&&m.dispatch((0,u.setFocusedNode)(S.id))}),[m,S]),null===m?null:r.createElement(Oe,{store:m,scrollToId:E,...g})}const Oe=r.memo((function(e){const{store:t,scrollToId:n,...o}=e,d="touch"===e.drag?l.TouchBackend:i.HTML5Backend;return(0,r.useEffect)((()=>{var e;t.dispatch((0,u.scrollToId)(null!==(e=null==n?void 0:n.id)&&void 0!==e?e:null))}),[n]),r.createElement(c.DndProvider,{backend:d,options:Le},r.createElement(s.Provider,{store:t,context:q},r.createElement(xe,{...o})))}))},693838:(e,t,n)=>{"use strict";n.d(t,{ObjectTreeContext:()=>r});const r=n(50959).createContext(null)},215078:(e,t,n)=>{"use strict";function r(e){return t=>e+"__"+t}n.d(t,{createActionTypeFactory:()=>r})},139043:(e,t,n)=>{"use strict";n.d(t,{useOverlayScroll:()=>c});var r=n(50959),o=n(650151),s=n(522224),i=n(601227);const l={onMouseOver:()=>{},onMouseOut:()=>{}};function c(e,t=i.CheckMobile.any()){const n=(0,r.useRef)(null),c=e||(0,r.useRef)(null),[d,a]=(0,s.useHover)(),[u,f]=(0,r.useState)({reference:n,containerHeight:0,containerWidth:0,contentHeight:0,contentWidth:0,scrollPosTop:0,scrollPosLeft:0,onVerticalChange:function(e){f((t=>({...t,scrollPosTop:e}))),(0,o.ensureNotNull)(c.current).scrollTop=e},onHorizontalChange:function(e){f((t=>({...t,scrollPosLeft:e}))),(0,o.ensureNotNull)(c.current).scrollLeft=e},visible:d}),p=(0,r.useCallback)((()=>{if(!c.current)return;const{clientHeight:e,scrollHeight:t,scrollTop:r,clientWidth:o,scrollWidth:s,scrollLeft:i}=c.current,l=n.current?n.current.offsetTop:0;f((n=>({...n,containerHeight:e-l,contentHeight:t-l,scrollPosTop:r,containerWidth:o,contentWidth:s,scrollPosLeft:i})))}),[]);function S(){f((e=>({...e,scrollPosTop:(0,o.ensureNotNull)(c.current).scrollTop,scrollPosLeft:(0,o.ensureNotNull)(c.current).scrollLeft})))}return(0,r.useEffect)((()=>{d&&p(),f((e=>({...e,visible:d})))}),[d]),(0,r.useEffect)((()=>{const e=c.current;return e&&e.addEventListener("scroll",S),()=>{e&&e.removeEventListener("scroll",S)}}),[c]),[u,t?l:a,c,p]}},800296:(e,t,n)=>{"use strict";n.d(t,{ListItemButton:()=>c});var r=n(50959),o=n(497754),s=n.n(o),i=n(72571),l=n(520723);function c(e){const{className:t,disabled:n,...o}=e;return r.createElement(i.Icon,{className:s()(l.button,n&&l.disabled,t),...o})}},852495:e=>{e.exports={button:"button-xNqEcuN2"}},511349:(e,t,n)=>{"use strict";n.d(t,{ToolWidgetIconButton:()=>l});var r=n(50959),o=n(497754),s=n(155352),i=n(852495);const l=r.forwardRef((function(e,t){const{className:n,id:l,...c}=e;return r.createElement(s.ToolWidgetButton,{id:l,"data-name":l,...c,ref:t,className:o(n,i.button)})}))},460925:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12 4h3v1h-1.04l-.88 9.64a1.5 1.5 0 0 1-1.5 1.36H6.42a1.5 1.5 0 0 1-1.5-1.36L4.05 5H3V4h3v-.5C6 2.67 6.67 2 7.5 2h3c.83 0 1.5.67 1.5 1.5V4ZM7.5 3a.5.5 0 0 0-.5.5V4h4v-.5a.5.5 0 0 0-.5-.5h-3ZM5.05 5l.87 9.55a.5.5 0 0 0 .5.45h5.17a.5.5 0 0 0 .5-.45L12.94 5h-7.9Z"/></svg>'},636296:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M8 9.5H6.5a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1V20m-8-1.5h11a1 1 0 0 0 1-1v-11a1 1 0 0 0-1-1h-11a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1z"/></svg>'}}]);