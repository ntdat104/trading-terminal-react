(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[1205],{851124:e=>{e.exports={view:"view-_gbYDtbd",hover:"hover-_gbYDtbd",hoverEnable:"hoverEnable-_gbYDtbd",hidden:"hidden-_gbYDtbd",button:"button-_gbYDtbd",header:"header-_gbYDtbd",headerTitle:"headerTitle-_gbYDtbd",headerIcon:"headerIcon-_gbYDtbd",values:"values-_gbYDtbd",item:"item-_gbYDtbd",active:"active-_gbYDtbd",itemTitle:"itemTitle-_gbYDtbd"}},814567:e=>{e.exports={container:"container-UNtFS6lU",divider:"divider-UNtFS6lU"}},691504:e=>{e.exports={scrollWrap:"scrollWrap-FaOvTD2r"}},567734:e=>{e.exports={container:"container-Tv7LSjUz",overlayScrollWrap:"overlayScrollWrap-Tv7LSjUz",wrapper:"wrapper-Tv7LSjUz"}},660591:e=>{e.exports={wrap:"wrap-vSb6C0Bj","wrap--horizontal":"wrap--horizontal-vSb6C0Bj",bar:"bar-vSb6C0Bj",barInner:"barInner-vSb6C0Bj","barInner--horizontal":"barInner--horizontal-vSb6C0Bj","bar--horizontal":"bar--horizontal-vSb6C0Bj"}},520723:e=>{e.exports={button:"button-w6lVe_oI",hovered:"hovered-w6lVe_oI",disabled:"disabled-w6lVe_oI"}},792199:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DataWindow:()=>Y});var r=n(50959),o=n(650151),l=n(965800),i=n(609838),a=n(209039),s=n(663557),c=n(964640),u=n(787729),d=n(272047),v=n(343601),h=n(989171),m=n(529596),p=n(101903),f=n(497754),g=n.n(f),b=n(72571),w=n(724377),S=n(926048),N=n(540642),z=n(800296),C=n(111982),E=n(94007),y=n(962766),D=n(851124);const P={[C.StdTheme.Light]:S.colorsPalette["color-white"],[C.StdTheme.Dark]:S.colorsPalette["color-cold-gray-900"]};function M(e){const{view:t,onClick:l,isActive:a,isVisible:s=!0,onVisibilityChange:c,onContextMenu:u,onHeaderDoubleClick:d,isHovered:v,icon:h,theme:m=C.StdTheme.Light,isHoverEnable:p=!1,...f}=e,w=(0,N.clean)(t.header(),!0),S=t.items().filter((e=>e.visible()));return r.createElement("div",{className:g()(D.view,a&&D.active,!s&&D.hidden,p&&D.hoverEnable,p&&v&&D.hover),onClick:l,onContextMenu:function(e){if(!u)return;e.preventDefault(),u(e)},onDoubleClick:d,...f},w&&r.createElement("div",{className:D.header},h&&r.createElement(b.Icon,{className:D.headerIcon,icon:h}),r.createElement("span",{className:g()(D.headerTitle,"apply-common-tooltip"),title:(0,N.clean)(t.title(),!0)},w),c&&r.createElement(z.ListItemButton,{icon:s?E:y,className:g()(D.button,"apply-common-tooltip"),onClick:function(e){e.stopPropagation(),(0,o.ensureDefined)(c)()},title:s?i.t(null,void 0,n(760724)):i.t(null,void 0,n(198337))})),s&&S.length>0&&r.createElement("div",{className:D.values},S.map(((e,t)=>r.createElement(T,{key:t,item:e,theme:m})))))}function T(e){const{item:t,theme:n}=e,o=t.color(),l=P[n];return r.createElement("div",{className:D.item},r.createElement("div",{className:g()(D.itemTitle,"apply-overflow-tooltip")},(0,N.clean)(t.title(),!0)),r.createElement("div",null,r.createElement("span",{style:{color:o&&W(o,l)?o:void 0}},t.value())))}function W(e,t){const n=(0,w.rgbToGrayscale)((0,w.parseRgb)(e)),r=(0,w.rgbToGrayscale)((0,w.parseRgb)(t));return Math.abs(n-r)>=25}
var H=n(109955),L=n(596058),x=n(979910),V=n(868674),I=n(416911),k=n(728824),B=n(607295),R=n(14083),_=n(814567);function Y(e){const{chartWidget:t,updateDelegate:f,selectedSourcesWV:g}=e,[b,w]=(0,r.useState)([]),[S,N]=(0,r.useState)(null),z=(0,r.useRef)(null),C=(0,l.useTheme)();return(0,r.useEffect)((()=>{function e(){t.hasModel()||w([]);const e=t.model().model().dataSources();w(e.map((e=>e.dataWindowView())).filter(O))}return e(),f.subscribe(null,e),()=>{f.unsubscribe(null,e)}}),[t]),(0,r.useEffect)((()=>{function e(e){var t,n;const r=e[0];if(!r)return void N(null);const o=null===(t=z.current)||void 0===t?void 0:t.querySelector(`[data-id="${r.id()}"]`),l=null==o?void 0:o.getBoundingClientRect(),i=null===(n=z.current)||void 0===n?void 0:n.getBoundingClientRect();o&&i&&l&&(i.top>l.top||i.bottom<l.bottom)&&o.scrollIntoView({block:"nearest"}),N(r)}return g.subscribe(e,{callWithLast:!0}),()=>{g.unsubscribe(e)}}),[g]),r.createElement(H.OverlayScrollWrapper,{scrollContainerRef:z,className:"chart-data-window"},r.createElement("div",{className:_.container},b.map(((e,l)=>{let p,f;return e instanceof s.SeriesDataWindowView?(p=e.series(),f=R):(e instanceof c.StudyDataWindowView||e instanceof u.OverlayDataWindowView)&&(p=e.study(),f=(0,L.isStudyStrategy)(p)?B:k),r.createElement(r.Fragment,{key:l},0!==l&&r.createElement("div",{className:_.divider}),p?r.createElement(M,{"data-id":p.id(),view:e,theme:C,icon:f,onClick:()=>E((0,o.ensureDefined)(p)),onHeaderDoubleClick:()=>function(e){t.showChartPropertiesForSource(e)}((0,o.ensureDefined)(p)),isActive:p===S,isVisible:p.properties().childs().visible.value(),isHovered:p===t.model().hoveredSource(),onVisibilityChange:()=>function(e){const r=e.properties().childs().visible,o=!r.value();t.model().setProperty(r,o,(o?new d.TranslatedString("show {title}",i.t(null,void 0,n(351382))):new d.TranslatedString("hide {title}",i.t(null,void 0,n(713017)))).format({title:new d.TranslatedString(e.name(),e.title(a.TitleDisplayTarget.DataWindow))}),(0,V.isLineTool)(e)&&x.lineToolsDoNotAffectChartInvalidation)}((0,o.ensureDefined)(p)),onContextMenu:e=>function(e,n){if(t.readOnly()||!n.hasContextMenu())return;E(n),n instanceof v.Series?function(e,n){const r=t.actions(),l=n.properties().visible.value(),i=l?void 0:y(n);m.ContextMenuManager.showMenu([r.format,l?r.seriesHide:(0,o.ensureDefined)(i)],e,void 0,{menuName:"DataWindowWidgetSeriesContextMenu",detail:{type:"series",id:n.instanceId()}},(()=>null==i?void 0:i.destroy()))}(e,n):n instanceof h.Study&&function(e,n){const r=t.actions(),l=n.properties().visible.value(),i=l?void 0:y(n);m.ContextMenuManager.showMenu([r.format,l?r.studyHide:(0,o.ensureDefined)(i),r.studyRemove],e,void 0,{menuName:"DataWindowWidgetStudyContextMenu",detail:{type:"study",id:n.id()}},(()=>null==i?void 0:i.destroy()))}(e,n)}(e,(0,o.ensureDefined)(p)),isHoverEnable:p.isHoveredEnabled()}):r.createElement(M,{view:e,theme:C}))}))));function E(e){t.model().selectionMacro((t=>{t.addSourceToSelection(e)}))}function y(e){return new p.PropertyBoundAction({actionId:"Chart.SelectedObject.Show",
options:{label:i.t(null,void 0,n(698334)),icon:I,checkable:!0}},{property:e.properties().visible,undoModel:t.model(),undoText:new d.TranslatedString("change visibility",i.t(null,void 0,n(201924)))})}}function O(e){return null!==e&&e.items().length>0}},73288:(e,t,n)=>{"use strict";n.d(t,{OverlayScrollContainer:()=>f});var r=n(50959),o=n(497754),l=n.n(o),i=n(431520),a=n(650151),s=n(822960);const c=n(660591);var u;!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e[e.HorizontalRtl=2]="HorizontalRtl"}(u||(u={}));const d={0:{isHorizontal:!1,isNegative:!1,sizePropName:"height",minSizePropName:"minHeight",startPointPropName:"top",currentMousePointPropName:"clientY",progressBarTransform:"translateY"},1:{isHorizontal:!0,isNegative:!1,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"left",currentMousePointPropName:"clientX",progressBarTransform:"translateX"},2:{isHorizontal:!0,isNegative:!0,sizePropName:"width",minSizePropName:"minWidth",startPointPropName:"right",currentMousePointPropName:"clientX",progressBarTransform:"translateX"}},v=40;function h(e){const{size:t,scrollSize:n,clientSize:o,scrollProgress:i,onScrollProgressChange:u,scrollMode:h,theme:m=c,onDragStart:p,onDragEnd:f,minBarSize:g=v}=e,b=(0,r.useRef)(null),w=(0,r.useRef)(null),[S,N]=(0,r.useState)(!1),z=(0,r.useRef)(0),{isHorizontal:C,isNegative:E,sizePropName:y,minSizePropName:D,startPointPropName:P,currentMousePointPropName:M,progressBarTransform:T}=d[h];(0,r.useEffect)((()=>{const e=(0,a.ensureNotNull)(b.current).ownerDocument;return S?(p&&p(),e&&(e.addEventListener("mousemove",R),e.addEventListener("mouseup",_))):f&&f(),()=>{e&&(e.removeEventListener("mousemove",R),e.removeEventListener("mouseup",_))}}),[S]);const W=t/n||0,H=o*W||0,L=Math.max(H,g),x=(t-L)/(t-H),V=n-t,I=E?-V:0,k=E?0:V,B=O((0,s.clamp)(i,I,k))||0;return r.createElement("div",{ref:b,className:l()(m.wrap,C&&m["wrap--horizontal"]),style:{[y]:t},onMouseDown:function(e){if(e.isDefaultPrevented())return;e.preventDefault();const t=Y(e.nativeEvent,(0,a.ensureNotNull)(b.current)),n=Math.sign(t),r=(0,a.ensureNotNull)(w.current).getBoundingClientRect();z.current=n*r[y]/2;let o=Math.abs(t)-Math.abs(z.current);const l=O(V);o<0?(o=0,z.current=t):o>l&&(o=l,z.current=t-n*l);u(j(n*o)),N(!0)}},r.createElement("div",{ref:w,className:l()(m.bar,C&&m["bar--horizontal"]),style:{[D]:g,[y]:L,transform:`${T}(${B}px)`},onMouseDown:function(e){e.preventDefault(),z.current=Y(e.nativeEvent,(0,a.ensureNotNull)(w.current)),N(!0)}},r.createElement("div",{className:l()(m.barInner,C&&m["barInner--horizontal"])})));function R(e){const t=Y(e,(0,a.ensureNotNull)(b.current))-z.current;u(j(t))}function _(){N(!1)}function Y(e,t){const n=t.getBoundingClientRect()[P];return e[M]-n}function O(e){return e*W*x}function j(e){return e/W/x}}var m=n(522224),p=n(691504);function f(e){const{reference:t,className:n,containerHeight:l=0,containerWidth:a=0,contentHeight:s=0,contentWidth:c=0,scrollPosTop:u=0,scrollPosLeft:d=0,onVerticalChange:v,onHorizontalChange:f,visible:g}=e,[b,w]=(0,m.useHover)(),[S,N]=(0,
r.useState)(!1),z=l<s,C=a<c,E=z&&C?8:0;return r.createElement("div",{...w,ref:t,className:o(n,p.scrollWrap),style:{visibility:g||b||S?"visible":"hidden"}},z&&r.createElement(h,{size:l-E,scrollSize:s-E,clientSize:l-E,scrollProgress:u,onScrollProgressChange:function(e){v&&v(e)},onDragStart:y,onDragEnd:D,scrollMode:0}),C&&r.createElement(h,{size:a-E,scrollSize:c-E,clientSize:a-E,scrollProgress:d,onScrollProgressChange:function(e){f&&f(e)},onDragStart:y,onDragEnd:D,scrollMode:(0,i.isRtl)()?2:1}));function y(){N(!0)}function D(){N(!1)}}},109955:(e,t,n)=>{"use strict";n.d(t,{OverlayScrollWrapper:()=>c});var r=n(50959),o=n(497754),l=n.n(o),i=n(73288),a=n(139043),s=n(567734);function c(e){const{children:t,className:n,wrapperClassName:o,reference:c,hasCustomTouchScrollAnimation:u,scrollContainerRef:d,isForceVisible:v,...h}=e,[m,p,f,g]=(0,a.useOverlayScroll)(d,u);return(0,r.useImperativeHandle)(c,(()=>({updateScrollState:g}))),r.createElement("div",{...h,...p,className:l()(s.container,n)},r.createElement(i.OverlayScrollContainer,{...m,visible:null!=v?v:m.visible,className:s.overlayScrollWrap}),r.createElement("div",{className:l()(s.wrapper,o),ref:f,onScroll:g},t))}},139043:(e,t,n)=>{"use strict";n.d(t,{useOverlayScroll:()=>s});var r=n(50959),o=n(650151),l=n(522224),i=n(601227);const a={onMouseOver:()=>{},onMouseOut:()=>{}};function s(e,t=i.CheckMobile.any()){const n=(0,r.useRef)(null),s=e||(0,r.useRef)(null),[c,u]=(0,l.useHover)(),[d,v]=(0,r.useState)({reference:n,containerHeight:0,containerWidth:0,contentHeight:0,contentWidth:0,scrollPosTop:0,scrollPosLeft:0,onVerticalChange:function(e){v((t=>({...t,scrollPosTop:e}))),(0,o.ensureNotNull)(s.current).scrollTop=e},onHorizontalChange:function(e){v((t=>({...t,scrollPosLeft:e}))),(0,o.ensureNotNull)(s.current).scrollLeft=e},visible:c}),h=(0,r.useCallback)((()=>{if(!s.current)return;const{clientHeight:e,scrollHeight:t,scrollTop:r,clientWidth:o,scrollWidth:l,scrollLeft:i}=s.current,a=n.current?n.current.offsetTop:0;v((n=>({...n,containerHeight:e-a,contentHeight:t-a,scrollPosTop:r,containerWidth:o,contentWidth:l,scrollPosLeft:i})))}),[]);function m(){v((e=>({...e,scrollPosTop:(0,o.ensureNotNull)(s.current).scrollTop,scrollPosLeft:(0,o.ensureNotNull)(s.current).scrollLeft})))}return(0,r.useEffect)((()=>{c&&h(),v((e=>({...e,visible:c})))}),[c]),(0,r.useEffect)((()=>{const e=s.current;return e&&e.addEventListener("scroll",m),()=>{e&&e.removeEventListener("scroll",m)}}),[s]),[d,t?a:u,s,h]}},965800:(e,t,n)=>{"use strict";n.d(t,{useTheme:()=>l});var r=n(297265),o=n(702054);function l(){return(0,r.useWatchedValueReadonly)({watchedValue:o.watchedTheme})}},297265:(e,t,n)=>{"use strict";n.d(t,{useWatchedValueReadonly:()=>o});var r=n(50959);const o=(e,t=!1)=>{const n="watchedValue"in e?e.watchedValue:void 0,o="defaultValue"in e?e.defaultValue:e.watchedValue.value(),[l,i]=(0,r.useState)(n?n.value():o);return(t?r.useLayoutEffect:r.useEffect)((()=>{if(n){i(n.value());const e=e=>i(e);return n.subscribe(e),()=>n.unsubscribe(e)}return()=>{}}),[n]),l}},800296:(e,t,n)=>{"use strict";n.d(t,{
ListItemButton:()=>s});var r=n(50959),o=n(497754),l=n.n(o),i=n(72571),a=n(520723);function s(e){const{className:t,disabled:n,...o}=e;return r.createElement(i.Icon,{className:l()(a.button,n&&a.disabled,t),...o})}},14083:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="currentColor"><path d="M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"/><path d="M18 7h1v3.5h-1zm0 10.5h1V21h-1z"/><path d="M9 8v12h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5z"/><path d="M10 4h1v3.5h-1zm0 16.5h1V24h-1z"/></svg>'},94007:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M2.448 10.124a10.82 10.82 0 0 1-.336-.609L2.105 9.5l.007-.015a12.159 12.159 0 0 1 1.686-2.466C5.002 5.665 6.752 4.373 9.05 4.373c2.297 0 4.047 1.292 5.25 2.646a12.166 12.166 0 0 1 1.687 2.466l.007.015-.007.015a12.163 12.163 0 0 1-1.686 2.466c-1.204 1.354-2.954 2.646-5.251 2.646-2.298 0-4.048-1.292-5.252-2.646a12.16 12.16 0 0 1-1.35-1.857zm14.558-.827l-.456.203.456.203v.002l-.003.005-.006.015-.025.052a11.813 11.813 0 0 1-.461.857 13.163 13.163 0 0 1-1.463 2.011c-1.296 1.46-3.296 2.982-5.998 2.982-2.703 0-4.703-1.522-6-2.982a13.162 13.162 0 0 1-1.83-2.677 7.883 7.883 0 0 1-.118-.243l-.007-.015-.002-.005v-.001l.456-.204-.456-.203v-.002l.002-.005.007-.015a4.66 4.66 0 0 1 .119-.243 13.158 13.158 0 0 1 1.83-2.677c1.296-1.46 3.296-2.982 5.999-2.982 2.702 0 4.702 1.522 5.998 2.981a13.158 13.158 0 0 1 1.83 2.678 8.097 8.097 0 0 1 .119.243l.006.015.003.005v.001zm-.456.203l.456-.203.09.203-.09.203-.456-.203zM1.092 9.297l.457.203-.457.203-.09-.203.09-.203zm9.958.203c0 1.164-.917 2.07-2 2.07-1.084 0-2-.906-2-2.07 0-1.164.916-2.07 2-2.07 1.083 0 2 .906 2 2.07zm1 0c0 1.695-1.344 3.07-3 3.07-1.657 0-3-1.375-3-3.07 0-1.695 1.343-3.07 3-3.07 1.656 0 3 1.375 3 3.07z"/></svg>'},607295:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none"><path stroke="currentColor" d="M4.5 12.5l4.59-4.59a2 2 0 0 1 2.83 0l3.17 3.17a2 2 0 0 0 2.83 0L22.5 6.5m-8 9.5v5.5M12 19l2.5 2.5L17 19m4.5 3v-5.5M19 19l2.5-2.5L24 19"/></svg>'},728824:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" d="M5.5 16.5l4.586-4.586a2 2 0 0 1 2.828 0l3.172 3.172a2 2 0 0 0 2.828 0L23.5 10.5"/></svg>'},962766:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M14.692 3.012l-12 12.277.715.699 12-12.277-.715-.699zM9.05 15.627a7.042 7.042 0 0 1-3.144-.741l.742-.76c.72.311 1.52.5 2.402.5 2.297 0 4.047-1.29 5.25-2.645a12.168 12.168 0 0 0 1.687-2.466l.007-.015-.007-.015A12.166 12.166 0 0 0 14.3 7.019c-.11-.124-.225-.247-.344-.37l.699-.715c.137.14.268.28.392.42a13.16 13.16 0 0 1 1.83 2.678 8.117 8.117 0 0 1 .119.243l.006.015.003.005v.001l-.456.204.456.203v.002l-.003.005-.006.015-.025.052a11.762 11.762 0 0 1-.461.857 13.158 13.158 0 0 1-1.463 2.011c-1.296 1.46-3.296 2.982-5.998 2.982zm7.5-6.127l.456-.203.09.203-.09.203-.456-.203zm-7.5 3.07c-.27 0-.53-.037-.778-.105l.879-.899c.999-.052 1.833-.872 1.895-1.938l.902-.923c.066.253.102.52.102.795 0 1.695-1.344 3.07-3 3.07zM6.15 10.294l.902-.923c.063-1.066.896-1.886 1.895-1.938l.879-.9a2.94 2.94 0 0 0-.777-.103c-1.657 0-3 1.374-3 3.069 0 .275.035.541.101.795zM9.05 4.373c.88 0 1.68.19 2.4.5l.743-.759a7.043 7.043 0 0 0-3.143-.74c-2.703 0-4.703 1.521-6 2.98a13.159 13.159 0 0 0-1.83 2.678 7.886 7.886 0 0 0-.118.243l-.007.015-.002.005v.001l.456.204-.457-.203-.09.203.09.203.457-.203-.456.203v.002l.002.005.007.015a4.5 4.5 0 0 0 .119.243 13.152 13.152 0 0 0 1.83 2.677c.124.14.255.28.392.42l.7-.715c-.12-.122-.235-.245-.345-.369a12.156 12.156 0 0 1-1.686-2.466L2.105 9.5l.007-.015a12.158 12.158 0 0 1 1.686-2.466C5.002 5.665 6.752 4.373 9.05 4.373z"/></svg>'}}]);