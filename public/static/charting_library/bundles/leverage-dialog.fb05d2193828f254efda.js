(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[6112],{839391:e=>{"use strict";function t(e){return"function"==typeof e?e():e}function n(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}e.exports=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=void 0,s=void 0,l=void 0,i=[];return function(){var c=t(r),m=(new Date).getTime(),d=!o||m-o>c;o=m;for(var g=arguments.length,v=Array(g),p=0;p<g;p++)v[p]=arguments[p];if(d&&a.leading)return a.accumulate?Promise.resolve(e.call(this,[v])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(v)));if(s?clearTimeout(l):s=n(),i.push(v),l=setTimeout(u.bind(this),c),a.accumulate){var f=i.length-1;return s.promise.then((function(e){return e[f]}))}return s.promise};function u(){var t=s;clearTimeout(l),Promise.resolve(a.accumulate?e.call(this,i):e.apply(this,i[i.length-1])).then(t.resolve,t.reject),i=[],s=null}}},853575:e=>{e.exports={tag:"tag-E35yqcCX",disabled:"disabled-E35yqcCX",animated:"animated-E35yqcCX"}},878369:e=>{e.exports={tags:"tags-nNSIFYl1",tag:"tag-nNSIFYl1",tagBuy:"tagBuy-nNSIFYl1",tagSell:"tagSell-nNSIFYl1"}},859887:e=>{e.exports={"tablet-small-breakpoint":"screen and (max-width: 430px)",scrollable:"scrollable-NakQh3ob",content:"content-NakQh3ob",title:"title-NakQh3ob",label:"label-NakQh3ob",buttonsWrapper:"buttonsWrapper-NakQh3ob",button:"button-NakQh3ob",previewMessage:"previewMessage-NakQh3ob",warnings:"warnings-NakQh3ob",leverageInput:"leverageInput-NakQh3ob"}},621317:(e,t,n)=>{"use strict";n.d(t,{CreateConfirmDialog:()=>s});var r=n(50959),a=n(649719);const o=r.lazy((async()=>({default:(await Promise.all([n.e(5735),n.e(6625),n.e(4392),n.e(6665),n.e(8722),n.e(7092),n.e(8548),n.e(2691),n.e(3566)]).then(n.bind(n,976669))).AdaptiveConfirmDialog}))),s=(0,a.withDialogLazyLoad)(o)},322642:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LeverageDialog:()=>D});var r=n(609838),a=n(50959),o=n(960521),s=n.n(o),l=n(252130),i=n(839391),u=n.n(i),c=n(497754),m=n.n(c),d=n(742554),g=n(463039),v=n(587125),p=n(621317),f=n(853575),b=n.n(f);function h(e){const{className:t,...n}=e;return a.createElement("span",{...n,className:c(t,b().tag,b().disabled)})}var N=n(878369);const w={1:r.t(null,void 0,n(790258)),2:r.t(null,{context:"trading"},n(105593)),3:r.t(null,{context:"trading"},n(920902)),4:r.t(null,void 0,n(264073))};function y(e){const{side:t,orderType:o,customFields:s}=e,l=[{text:1===t?r.t(null,void 0,n(169961)):r.t(null,void 0,n(168222)),className:1===t?N.tagBuy:N.tagSell},{text:w[o]}];return void 0!==s&&Object.values(s).filter((e=>"string"==typeof e)).map((e=>l.push({text:e}))),a.createElement("div",{className:N.tags},l.map((e=>a.createElement(h,{key:e.text,className:m()(N.tag,e.className)},e.text))))}var x=n(621575);function E(e,t){return s()(e).div(t).round(0,s().roundDown).mul(t)}function S(e,t,n){const r=E(e,5);if(r.gt(0)&&r.minus(t).mod(n).eq(0))return r}function C(e,t,n){const r=t.eq(n),a=r?0:t
;return E(r?e:e.minus(t),n).plus(a)}function k(e,t,n){return e.plus(s()(n).mul(t))}function M(e){if(e.min>=e.max)return[];const t=new(s())(e.min),n=new(s())(e.max),r=new(s())(e.step),a=function(e,t){return e.gt(1)||t.lt(1)?e:s()(1)}(t,n),o=function(e,t,n){const r=t.minus(e).div(n);return r.gte(4)?3:r.round(0,s().roundDown).minus(1).toNumber()}(t,n,r),l=function(e,t,n){return t.minus(e).div(n+1)}(t,n,o),i=[a.toNumber()];for(let e=1;e<=o;e++){const o=k(a,l,e);let s=S(o,t,r);if((void 0===s||s.eq(i[e-1]))&&(s=C(o,t,r)),!s.eq(i[e-1])){if(s.gte(n))break;i.push(s.toNumber())}}return i.push(e.max),i}var T=n(172912),F=n(209595),I=n(859887);function D(e){const{isOpen:t,onClose:s,leverage:i,title:c,symbol:f,displaySymbol:b,brokerName:h,min:N,max:w,step:E,side:S,orderType:C,infos:k,warnings:D,errors:B,customFields:O,onLeverageSet:Q,onLeveragePreview:q,onSetLeverageValueInOrderWidget:P}=e,j=(0,a.useCallback)(u()(function(){let e;return async t=>{let n;const r=e=q(te(t));try{n=await r}catch(e){n={errors:[(0,x.getErrorMessage)(e)]}}e===r&&R.current&&K(n)}}(),300),[]),[A,W]=(0,a.useState)(i),[Y,V]=(0,a.useState)(!1),[X,$]=(0,a.useState)(!1),[z,H]=(0,a.useState)(),[U,G]=(0,a.useState)(),[J,K]=(0,a.useState)({infos:k,warnings:D,errors:B}),R=(0,l.useIsMounted)();(0,a.useEffect)((()=>{let e;const t=new o.Big(A).minus(N).mod(E);void 0!==J.errors&&J.errors.length>0?e=J.errors.join(". "):Y?e=void 0:t.eq(0)||(e=r.t(null,{replace:{step:String(E)}},n(568556))),$(L(J.errors)||Y||void 0!==e),H(e),G(void 0)}),[Y,A,E,N,J]),(0,a.useEffect)((()=>{j(A)}),[A,j]),(0,a.useEffect)((()=>{W(i)}),[i]);const Z=(0,a.useMemo)((()=>c.charAt(0).toUpperCase()+c.substring(1).toLocaleLowerCase()),[c]),_=(0,a.useMemo)((()=>M({min:N,max:w,step:E})),[w,N,E]),ee=(0,a.useMemo)((()=>new T.PriceFormatter({priceScale:Math.pow(10,(0,F.numOfDecimalPlaces)(E)),ignoreLocaleNumberFormat:!0})),[E]);return a.createElement(p.CreateConfirmDialog,{isOpen:t,isOpened:t,submitButtonDisabled:X,render:function(){var e,t;return a.createElement(d.TouchScrollContainer,null,a.createElement("div",{className:I.content},a.createElement("div",{className:I.title},`${b}, ${h}`),a.createElement(y,{side:S,orderType:C,customFields:O}),a.createElement(g.Label,{htmlFor:"leverageInput",className:I.label},r.t(null,void 0,n(824813))),a.createElement(v.NumberInput,{id:"leverageInput",value:A,min:N,max:w,step:E,roundByStep:!1,error:X||Boolean(U),errorMessage:z||U,boundariesErrorMessages:{greaterThanMax:r.t(null,{replace:{max:String(w)}},n(402517)),lessThanMin:r.t(null,{replace:{min:String(N)}},n(432381))},errorHandler:re,onValueChange:ne,stretch:!0,className:I.leverageInput,formatter:ee,shouldApplyValueOnFormatterChange:!0}),a.createElement("div",{className:I.buttonsWrapper},_.map((e=>a.createElement("button",{type:"button",className:I.button,key:e,onClick:()=>{ne(e)}},`x${e}`)))),L(J.infos)&&a.createElement("div",{className:I.previewMessage},null===(e=J.infos)||void 0===e?void 0:e.join(". ")),L(J.warnings)&&a.createElement("div",{className:m()(I.previewMessage,I.warnings)
},null===(t=J.warnings)||void 0===t?void 0:t.join(". "))))},title:Z,dataName:"trading-leverage-dialog",submitButtonText:r.t(null,void 0,n(874115)),cancelButtonText:r.t(null,void 0,n(904543)),onSubmit:async function(){try{await Q(te(A)),P(A),s()}catch(e){G((0,x.getErrorMessage)(e))}},onCancel:()=>{},onClose:s,defaultActionOnClose:"cancel",onClickOutside:s});function te(e){return{side:S,symbol:f,leverage:e,customFields:O,orderType:C}}function ne(e){W(e)}function re(e){V(e)}}function L(e){return void 0!==e&&e.length>0}}}]);