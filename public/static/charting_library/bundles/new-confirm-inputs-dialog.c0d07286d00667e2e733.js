(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[3030],{259142:function(t,e){var n,o,i;o=[e],n=function(t){"use strict";function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(t,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var o={get passive(){n=!0}};window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}var i="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),r=[],l=!1,s=-1,u=void 0,c=void 0,a=function(t){return r.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},d=function(t){var e=t||window.event;return!!a(e.target)||1<e.touches.length||(e.preventDefault&&e.preventDefault(),!1)},p=function(){setTimeout((function(){void 0!==c&&(document.body.style.paddingRight=c,c=void 0),void 0!==u&&(document.body.style.overflow=u,u=void 0)}))};t.disableBodyScroll=function(t,o){if(i){if(!t)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(t&&!r.some((function(e){return e.targetElement===t}))){var p={targetElement:t,options:o||{}};r=[].concat(e(r),[p]),t.ontouchstart=function(t){1===t.targetTouches.length&&(s=t.targetTouches[0].clientY)},t.ontouchmove=function(e){var n,o,i,r;1===e.targetTouches.length&&(o=t,r=(n=e).targetTouches[0].clientY-s,!a(n.target)&&(o&&0===o.scrollTop&&0<r||(i=o)&&i.scrollHeight-i.scrollTop<=i.clientHeight&&r<0?d(n):n.stopPropagation()))},l||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),l=!0)}}else{m=o,setTimeout((function(){if(void 0===c){var t=!!m&&!0===m.reserveScrollBarGap,e=window.innerWidth-document.documentElement.clientWidth;t&&0<e&&(c=document.body.style.paddingRight,document.body.style.paddingRight=e+"px")}void 0===u&&(u=document.body.style.overflow,document.body.style.overflow="hidden")}));var f={targetElement:t,options:o||{}};r=[].concat(e(r),[f])}var m},t.clearAllBodyScrollLocks=function(){i?(r.forEach((function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null})),l&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),l=!1),r=[],s=-1):(p(),r=[])},t.enableBodyScroll=function(t){if(i){if(!t)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");t.ontouchstart=null,t.ontouchmove=null,r=r.filter((function(e){return e.targetElement!==t})),l&&0===r.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),l=!1)}else 1===r.length&&r[0].targetElement===t?(p(),r=[]):r=r.filter((function(e){return e.targetElement!==t}))}},void 0===(i="function"==typeof n?n.apply(e,o):n)||(t.exports=i)},71580:t=>{t.exports={separator:"separator-EI7Qsb2Q",scrollable:"scrollable-EI7Qsb2Q"}},876207:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ConfirmInputsDialogRenderer:()=>h})
;var o=n(50959),i=n(609838),r=n(976669),l=n(370981),s=n(742554),u=n(80831),c=n(329452),a=n(601227),d=n(71580);function p(t){const{title:e,confirmInputs:p,inputsProperty:f,studyMetaInfo:m,model:h,confirmInputsType:v,onCancel:y,onSubmit:g,onClose:w,onStudyInputChange:b}=t,[S,I]=(0,o.useState)(!0),E=(0,o.useMemo)((function(){const t=new c.Delegate;return{isInputsStudy:!0,symbolsResolved:()=>t,resolvedSymbolInfoBySymbol:()=>null,tempProperties:f}}),[]),C=(0,o.useRef)(null),[_,T]=(0,o.useState)(M());return(0,o.useEffect)((()=>{if(!a.CheckMobile.any()&&S&&"symbol"===v&&C.current){const t=C.current.querySelector("input");t&&t.focus()}}),[S]),o.createElement(r.AdaptiveConfirmDialog,{dataName:"confirm-inputs-dialog",title:e,isOpened:S,onSubmit:function(){g(f.state().inputs),P()},onCancel:y,onClickOutside:P,onClose:P,render:()=>o.createElement(o.Fragment,null,o.createElement("div",{className:d.separator}),o.createElement(s.TouchScrollContainer,{className:d.scrollable,onScroll:D},o.createElement(u.InputsTabContent,{reference:C,property:f,studyMetaInfo:m,model:h,study:E,inputs:p,onStudyInputChange:B}))),defaultActionOnClose:"none",submitButtonText:i.t(null,void 0,n(33391)),submitButtonDisabled:_,submitOnEnterKey:!1});function D(){l.globalCloseDelegate.fire()}function P(){I(!1),w()}function M(){const{inputs:t}=f.state();for(const e of p)if("symbol"===e.type&&!e.optional&&""===t[e.id])return!0;return!1}function B(t,e){null==b||b(t,e),T(M())}}var f=n(995553),m=n(651674);class h extends f.DialogRenderer{constructor(t,e,n,o,i,r,l,s,u){super(),this._handleClose=()=>{var t;null===(t=this._rootInstance)||void 0===t||t.unmount(),this._setVisibility(!1),this._onClose()},this._title=t,this._confirmInputs=e,this._model=r,this._confirmInputsType=o,this._studyMetaInfo=i,this._onSubmit=l,this._onClose=s,this._onStudyInputChange=u,this._inputsProperty=n}show(){this.visible().value()||(this._rootInstance=(0,m.createReactRoot)(o.createElement(p,{title:this._title,confirmInputs:this._confirmInputs,inputsProperty:this._inputsProperty,studyMetaInfo:this._studyMetaInfo,model:this._model,confirmInputsType:this._confirmInputsType,onSubmit:this._onSubmit,onCancel:()=>{},onClose:this._handleClose,onStudyInputChange:this._onStudyInputChange}),this._container),this._setVisibility(!0))}hide(){this._handleClose()}}},759393:(t,e,n)=>{"use strict";n.r(e),n.d(e,{selectInputValuesOnChart:()=>u});var o=n(650151),i=n(926048),r=n(609838),l=n(457540),s=n(651407);i.colorsPalette["color-cold-gray-500"];async function u(t,e,i,u,c){let a;const d=(0,l.getInputGroups)(e);t.model().model();for await(const t of d)await p(t).catch((t=>{throw new Error(t)}));return{customSourceId:void 0,destPane:a};async function p(t){if((0,l.isGroup)(t))if((0,l.isInputInlines)(t)){const e=function(t){if(2!==t.length||t[0].type===t[1].type)return null;return"price"===t[0].type?{price:t[0],time:t[1]}:{price:t[1],time:t[0]}}(t.children);if(e){const{time:o,price:i}=e,l=o.inline?r.t(null,{replace:{inputInline:o.inline,studyShortDescription:u}},n(710679)):r.t(null,{replace:{studyShortDescription:u
}},n(692229)),s=h(t.id);await m(t,"all",null!=s?s:l,o.id,i.id)}else for await(const e of t.children)await f(e)}else for await(const e of t.children)await p(e);else await f(t)}async function f(t){const e="time"===t.type,o=e?"time":"price",i=function(){if(t.inline){const e=h(t.inline);if(e)return e}if(t.tooltip)return t.tooltip;const o=t.name?r.t(null,{replace:{inputTitle:t.name,studyShortDescription:u}},n(959451)):r.t(null,{replace:{studyShortDescription:u}},n(860935)),i=t.name?r.t(null,{replace:{inputTitle:t.name,studyShortDescription:u}},n(994238)):r.t(null,{replace:{studyShortDescription:u}},n(224404));return e?o:i}(),l=e?t.id:void 0,s=e?void 0:t.id;await m(t,o,i,l,s)}async function m(e,n,r,l,u){const c=await t.requestSelectPoint({pointType:n,pane:a,lineColor:void 0,selectPointMode:s.SelectPointMode.Study},r);void 0===a&&(a=c.pane);const d=i.childs().inputs;d&&(l&&(0,o.ensureDefined)(d.child(l)).setValue(1e3*(c.point.time||0)),u&&(0,o.ensureDefined)(d.child(u)).setValue(c.point.price))}function h(t){let e;return c.filter((e=>e.inline===t)).forEach((t=>{t.tooltip&&(e=t.tooltip)})),e}}}}]);