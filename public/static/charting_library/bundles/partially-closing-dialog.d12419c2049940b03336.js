(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[5001],{629317:e=>{e.exports={scrollable:"scrollable-LaEx6V_s",content:"content-LaEx6V_s",input:"input-LaEx6V_s",endSlot:"endSlot-LaEx6V_s",message:"message-LaEx6V_s",estimation:"estimation-LaEx6V_s",label:"label-LaEx6V_s"}},648017:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PartiallyClosingDialog:()=>f});var l=n(609838),o=n(50959),a=n(302946),i=n(960521),s=n(742554),r=n(370981),u=n(180185);var c=n(587125),m=n(621317),d=n(391431),p=n(629317);function f(e){const{positionOrIndividualPosition:t,qtyFormatter:f,supportLots:v,qtyLabel:g,qtyStep:y,uiQtyStep:E,minQty:b,message:S,onClose:w,dialogActionHandler:C,onOpen:L}=e,h=(0,o.useMemo)((()=>Math.abs(t.qty)),[t.qty]),[x,_]=(0,o.useState)(!0),[q,Q]=(0,o.useState)(!1),[N,k]=(0,o.useState)(h),[D,V]=(0,o.useState)(!1),[O,B]=(0,o.useState)(!1),[M,P]=(0,o.useState)(),A=(()=>{const[e,t]=(0,o.useState)(!window.navigator.onLine),n=e=>t("offline"===e.type);return(0,o.useEffect)((()=>(window.addEventListener("online",n),window.addEventListener("offline",n),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}))),e})(),F=!O&&null!==N&&N<h;(0,o.useEffect)((()=>{let e;const t=new i.Big(h),o=null!==N?new i.Big(N):null,a=null==o?void 0:o.minus(b).mod(y);null===o?e=l.t(null,void 0,n(784830)):o.gt(t)?e=l.t(null,void 0,n(917138)):!o.eq(t)&&o.lt(b)?e=l.t(null,void 0,n(364144)).replace("{minQty}",String(b)):!o.eq(t)&&t.minus(o).lt(b)?e=l.t(null,void 0,n(979841)).replace("{minQty}",String(b)):o.eq(t)||(null==a?void 0:a.eq(0))||(e=l.t(null,void 0,n(568556)).replace("{step}",String(y))),B(D||void 0!==e),P(e)}),[D,N,h,y,b]),(0,o.useEffect)((()=>{A&&K()}),[A,K]);const T=(0,o.useMemo)((()=>null!==N?f.format(N):""),[N,f]),z=(0,o.useMemo)((()=>null!==N?f.format(new i.Big(h).minus(N).toNumber()):""),[N,h,f]),H=q&&null!==N&&N<h?l.t(null,void 0,n(330285)):l.t(null,void 0,n(383236));return o.createElement(m.CreateConfirmDialog,{isOpen:x,isOpened:x,submitButtonDisabled:q&&O,render:function(){const e=f.format(h),i=l.t(null,{context:"close_position_total",plural:"of {positionQty} lots",count:h},n(828781)).replace("{positionQty}",e),r=l.t(null,{context:"close_position_total",plural:"of {positionQty} units",count:h},n(655511)).replace("{positionQty}",e),u=l.t(null,{context:"close_position_total",plural:"of {positionQty}",count:h},n(608478)).replace("{positionQty}",`${e} ${g}`);let m=r;v&&(m=i);g&&(m=u);return o.createElement(s.TouchScrollContainer,{className:p.scrollable,onScroll:J},o.createElement("div",{className:p.content},o.createElement("div",{className:p.message},S),o.createElement(a.Checkbox,{name:"partially-close-checkbox",label:o.createElement("span",{className:p.label},l.t(null,void 0,n(219375))),checked:q,onChange:I,disabled:!1,indeterminate:!1,labelPositionReverse:!1}),q&&o.createElement("form",{onSubmit:R},o.createElement(c.NumberInput,{error:O,errorMessage:M,errorHandler:G,className:p.input,value:(0,d.applyRounding)(N,f),forceShowControls:!0,min:b,step:y,uiStep:E,onValueChange:$,onEmptyString:j,
endSlot:o.createElement("p",{className:p.endSlot},m),useFormatter:!1}),F&&o.createElement("div",{className:p.estimation},o.createElement("div",null,l.t(null,void 0,n(718806)).replace("{symbol}",t.symbol).replace("{quantity}",T)),o.createElement("div",null,l.t(null,void 0,n(353876)).replace("{leavingQty}",z))))))},onClose:K,title:l.t(null,void 0,n(383236)),onSubmit:R,onCancel:()=>{},onKeyDown:function(e){27===(0,u.hashFromEvent)(e)&&K()},dataName:"trading-partial-closing-dialog",backdrop:!0,submitOnEnterKey:!0,defaultActionOnClose:"none",submitButtonText:H,cancelButtonText:l.t(null,void 0,n(904543)),onOpen:L});function I(){Q((e=>!e))}function K(){_(!1),C({status:!1}),w()}function R(){C(q?null===N||O?{status:!1}:{status:!0,qty:N}:{status:!0,qty:h}),_(!1),w()}function $(e){k(e)}function j(){k(null)}function G(e){V(e)}function J(){r.globalCloseDelegate.fire()}}},621317:(e,t,n)=>{"use strict";n.d(t,{CreateConfirmDialog:()=>i});var l=n(50959),o=n(649719);const a=l.lazy((async()=>({default:(await Promise.all([n.e(5735),n.e(6625),n.e(4392),n.e(6665),n.e(8722),n.e(7092),n.e(8548),n.e(2691),n.e(3566)]).then(n.bind(n,976669))).AdaptiveConfirmDialog}))),i=(0,o.withDialogLazyLoad)(a)}}]);